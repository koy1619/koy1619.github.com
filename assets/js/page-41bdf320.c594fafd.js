(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{336:function(s,e,a){"use strict";a.r(e);var t=a(1),v=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"mysql5-1主从服务设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql5-1主从服务设置","aria-hidden":"true"}},[s._v("#")]),s._v(" Mysql5.1主从服务设置")]),s._v(" "),a("p",[s._v("Mysql主从服务设置")]),s._v(" "),a("pre",[a("code",[s._v("master IP:192.168.1.84\n\nslave IP:192.168.1.87\n")])]),s._v(" "),a("ol",[a("li")]),s._v(" "),a("p",[s._v("编辑master的/etc/my.cnf 在[mysqld]选项中加入下列两行：")]),s._v(" "),a("p",[s._v("Server-id=1 //标识为主库")]),s._v(" "),a("p",[s._v("Log-bin //设置需要记录log, 如果有特殊要求可以设置特定的数据库作为同步数据库：binlog-do-db=DB_name[/php]")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li")]),s._v(" "),a("p",[s._v("考虑到安全问题，增加用户“backup”作为slave登陆备份数据的用户")]),s._v(" "),a("p",[s._v("useradd backup")]),s._v(" "),a("p",[s._v("passwd 123456")]),s._v(" "),a("p",[s._v("/etc/init.d/mysqld restart")]),s._v(" "),a("p",[s._v("mysql -u root -p")]),s._v(" "),a("p",[s._v("mysql> grant replication slave,reload,super on "),a("em",[s._v(".")]),s._v(" to backup@192.168.1.87 identified by 123456;")]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li")]),s._v(" "),a("p",[s._v("slave连接master测试")]),s._v(" "),a("p",[s._v("/usr/bin/mysql –u backup –p123456 –h192.168.1.84")]),s._v(" "),a("p",[s._v("出现mysql提示符就OK啦!")]),s._v(" "),a("p",[s._v("4.关闭slave数据库,编辑它的/etc/my.cnf 在选项[mysqld]下增加以下几列")]),s._v(" "),a("p",[s._v("Server-id=2 //标识slave 只要不和master相同就可以了"),a("br"),s._v("\nMaster-host=192.168.1.84"),a("br"),s._v("\nMaster-user=backup //同步用户"),a("br"),s._v("\nMaster-password=123456[/php]")]),s._v(" "),a("ol",{attrs:{start:"5"}},[a("li")]),s._v(" "),a("p",[s._v("启动slave,并确定slave、master都已启动，再让slave进行同步master数据")]),s._v(" "),a("p",[s._v("/etc/init.d/mysqld start")]),s._v(" "),a("p",[s._v("mysql")]),s._v(" "),a("p",[s._v("mysql>load data from master; (这一步的功能相当于在master中直接拷贝数据到slave)")]),s._v(" "),a("ol",{attrs:{start:"6"}},[a("li")]),s._v(" "),a("p",[s._v("测试")]),s._v(" "),a("p",[s._v("在master中：")]),s._v(" "),a("p",[s._v("mysql>create database chenggong;\nmysql>use chenggong;\nmysql>create table worker (name char(8),addr char(20));")]),s._v(" "),a("p",[s._v("然后进入slave：mysql>show databases; (结果中应有“chenggong”)")]),s._v(" "),a("p",[s._v("mysql>Use chenggong;\nmysql>show tables; （结果中应有“worker”）")]),s._v(" "),a("p",[s._v("另外：mysql>SHOW SLAVE STATUS\\G；")])])}),[],!1,null,null,null);e.default=v.exports}}]);