(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{395:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("我的论坛ID")]),s._v(" "),a("p",[s._v("https://kubesphere.com.cn/forum/u/koy1619")]),s._v(" "),a("h2",{attrs:{id:"前提条件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前提条件"}},[s._v("#")]),s._v(" 前提条件")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[a("code",[s._v("Kubernetes")]),s._v("版本： "),a("code",[s._v("1.13.0")]),s._v(" ≤ "),a("code",[s._v("K8s version")]),s._v(" < "),a("code",[s._v("1.16")]),s._v("；")]),s._v(" "),a("p",[a("code",[s._v("Helm")]),s._v("，版本 = "),a("code",[s._v("v2.15.2")]),s._v("（其他版本有bug，见"),a("a",{attrs:{href:"https://kubesphere.com.cn/forum/d/138-2-1-log",target:"_blank",rel:"noopener noreferrer"}},[s._v("kubesphere论坛"),a("OutboundLink")],1),s._v("），且已安装了 Tiller")]),s._v(" "),a("p",[s._v("集群的可用 "),a("code",[s._v("CPU")]),s._v(" > "),a("code",[s._v("1 C")]),s._v("，可用内存 > "),a("code",[s._v("2 G")]),s._v("；")]),s._v(" "),a("p",[s._v("集群已有存储类型（"),a("code",[s._v("StorageClass")]),s._v("）。")]),s._v(" "),a("p",[a("code",[s._v("metrics-server")]),s._v("，可以执行命令"),a("code",[s._v("kubectl top node")]),s._v("之类")])]),s._v(" "),a("h2",{attrs:{id:"安装kubernetes集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装kubernetes集群"}},[s._v("#")]),s._v(" 安装Kubernetes集群")]),s._v(" "),a("p",[s._v("参见"),a("a",{attrs:{href:"https://linux48.com/container/2019-09-11-k8s-bin-install.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("安装Kubernetes集群"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"安装helm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装helm"}},[s._v("#")]),s._v(" 安装Helm")]),s._v(" "),a("p",[s._v("参见"),a("a",{attrs:{href:"https://linux48.com/container/2019-11-07-helm.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("安装Helm"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"配置storageclass"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置storageclass"}},[s._v("#")]),s._v(" 配置StorageClass")]),s._v(" "),a("p",[s._v("参见"),a("a",{attrs:{href:"https://linux48.com/container/2019-11-12-config-storageclass.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("配置StorageClass"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"安装metrics-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装metrics-server"}},[s._v("#")]),s._v(" 安装metrics-server")]),s._v(" "),a("p",[s._v("如果使用kubesphere自带metrics-server，则需要开启apiserver的聚合，参考文章也有写")]),s._v(" "),a("p",[s._v("参见"),a("a",{attrs:{href:"https://linux48.com/container/2019-11-13-metrics-server.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("安装metrics-server"),a("OutboundLink")],1)]),s._v(" "),a("hr"),s._v(" "),a("p",[a("strong",[s._v("以上准备完毕方可开始部署"),a("code",[s._v("kubesphere")])])]),s._v(" "),a("hr"),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/kubesphere/ks-installer.git\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim kubesphere-minimal.yaml")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置etcd地址 endpointIps: 10.255.0.170,10.255.0.171,10.255.0.172")]),s._v("\nkubectl  apply -f kubesphere-minimal.yaml\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\nkubectl logs -n kubesphere-system "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl get pod -n kubesphere-system -l "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ks-install -o "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("jsonpath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{.items[0].metadata.name}'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" -f\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("直到出现下面的日志，方成功！！！")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("**************************************************\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#####################################################")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###              Welcome to KubeSphere!           ###")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#####################################################")]),s._v("\n\nConsole: http://10.255.0.170:30880\nAccount: admin\nPassword: P@88w0rd\n\nNOTES：\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(". After logging into the console, please check the\n     monitoring status of "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" components "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n     the "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Cluster Status"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" If the "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" is not\n     ready, please "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wait")]),s._v(" patiently. You can start\n     to use when all components are ready.\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(". Please modify the default password after login.\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#####################################################")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"我碰到的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#我碰到的问题"}},[s._v("#")]),s._v(" 我碰到的问题")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://kubesphere.com.cn/forum/d/138-2-1-log/14",target:"_blank",rel:"noopener noreferrer"}},[s._v("见论坛"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("解决方法如下：")]),s._v(" "),a("p",[s._v("当日志到这里时")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("\nTASK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ks-core/ks-core "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" KubeSphere "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Getting Ingress installation files"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" *******\nok: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ingress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nok: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ks-account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nok: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ks-apigateway"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nok: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ks-apiserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ks-console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nok: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ks-controller-manager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nTASK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ks-core/ks-core "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" KubeSphere "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Creating manifests"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" ***********************\nok: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ingress'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'type'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'config'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ingress-controller.yaml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-account'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'type'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'deployment'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-account.yml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nok: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-apigateway'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'type'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'deploy'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-apigateway.yaml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-apiserver'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'type'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'deploy'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-apiserver.yml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nok: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-controller-manager'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'type'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'deploy'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-controller-manager.yaml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-console'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'type'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'config'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-console-config.yml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nok: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-console'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'type'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'deploy'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-console-deployment.yml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-console'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'type'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'svc'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-console-svc.yml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nok: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-console'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'type'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'deploy'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-docs-deployment.yaml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nok: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-console'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'type'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'config'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sample-bookinfo-configmap.yaml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nTASK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ks-core/ks-core "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" KubeSphere "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Creating Ingress-controller configmap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" ****\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nTASK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ks-core/ks-core "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" KubeSphere "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Check ks-account version"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" *****************\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nTASK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ks-core/ks-core "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" KubeSphere "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Update kubectl image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" *********************\nskipping: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nTASK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ks-core/ks-core "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" KubeSphere "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Creating ks-core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" *************************\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-apigateway'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-apigateway.yaml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-apiserver'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-apiserver.yml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-account'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-account.yml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-controller-manager'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-controller-manager.yaml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-console'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-console-config.yml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-console'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sample-bookinfo-configmap.yaml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-console'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-console-deployment.yml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nchanged: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-console'")]),s._v(", u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ks-console-svc.yml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nPLAY RECAP *********************************************************************\nlocalhost                  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ok")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("changed")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("unreachable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("failed")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("skipped")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rescued")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ignored")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br")])]),a("p",[s._v("需要执行以下脚本")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master ks-installer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat restart.sh ")]),s._v("\nkubectl scale -n kubesphere-system deployment ks-account --replicas"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nkubectl scale -n kubesphere-system deployment ks-account --replicas"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\nkubectl scale -n kubesphere-system deployment ks-apigateway --replicas"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nkubectl scale -n kubesphere-system deployment ks-apigateway --replicas"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\nkubectl scale -n kubesphere-system deployment ks-apiserver --replicas"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nkubectl scale -n kubesphere-system deployment ks-apiserver --replicas"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\nkubectl scale -n kubesphere-system deployment ks-console --replicas"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nkubectl scale -n kubesphere-system deployment ks-console --replicas"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\nkubectl scale -n kubesphere-system deployment ks-controller-manager --replicas"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nkubectl scale -n kubesphere-system deployment ks-controller-manager --replicas"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#kubectl scale -n kubesphere-system deployment --all --replicas=1     ")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("watch")]),s._v(" kubectl get deployments -n kubesphere-system\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# watch一下deployments都为READY状态")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master ks-installer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("p",[s._v("因为有几个 ks 组件起不来, 需要手动 scale")]),s._v(" "),a("p",[s._v("这个BUG，kubesphere的大佬们会后续在会在ks-installer修正！")]),s._v(" "),a("p",[s._v("没有创建服务按钮解决")]),s._v(" "),a("p",[s._v("https://kubesphere.com.cn/forum/d/251")]),s._v(" "),a("h2",{attrs:{id:"安装新组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装新组件"}},[s._v("#")]),s._v(" 安装新组件")]),s._v(" "),a("p",[s._v("PS:本文是mini安装，如果需要安装新组件，edit保存，查看log就OK！")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl edit cm -n kubesphere-system ks-installer\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("etcd监控须安装证书")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl -n kubesphere-system create secret generic kubesphere-ca  --from-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ca.crt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/k8s/kubernetes/ssl/ca.pem  --from-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ca.key"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/k8s/kubernetes/ssl/ca-key.pem \nkubectl -n kubesphere-monitoring-system create secret generic kube-etcd-client-certs  --from-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("etcd-client-ca.crt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/k8s/etcd/ssl/ca.pem   --from-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("etcd-client.crt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/k8s/etcd/ssl/ca.pem  --from-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("etcd-client.key"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/k8s/etcd/ssl/ca-key.pem\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"卸载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卸载"}},[s._v("#")]),s._v(" 卸载")]),s._v(" "),a("p",[s._v("安装过程出现问题，想卸载干净，如下")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl  delete -f kubesphere-minimal.yaml \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#此脚本删除pod和ns不干净，还得手动清除一些，不过也不多")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" scripts/kubesphere-delete.sh\n\n清除nfs空间\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);