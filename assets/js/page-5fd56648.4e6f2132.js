(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{396:function(s,a,t){"use strict";t.r(a);var n=t(2),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"kube-dns"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kube-dns"}},[s._v("#")]),s._v(" kube-dns")]),s._v(" "),t("p",[s._v("7æœˆä»½åˆšå¼€å§‹ç ”ç©¶çš„æ—¶å€™ï¼Œå› ä¸ºpodè¦è¯»å–é˜¿é‡Œäº‘RDSï¼Œå’Œä¸€äº›å…¬ç½‘çš„æ¥å£ï¼Œéœ€è¦DNSè§£æ")]),s._v(" "),t("p",[s._v("æ‰€ä»¥å®‰è£…äº†"),t("a",{attrs:{href:"https://linux48.com/container/2019-07-12-k8s.html#%E5%AE%89%E8%A3%85kube-dns",target:"_blank",rel:"noopener noreferrer"}},[s._v("kube-dns"),t("OutboundLink")],1),s._v("ï¼Œè§£å†³äº†å®¹å™¨ä½¿ç”¨DNSè§£æçš„é—®é¢˜")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"é€ è½®å­è§£æå†…ç½‘hosts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é€ è½®å­è§£æå†…ç½‘hosts"}},[s._v("#")]),s._v(" é€ è½®å­è§£æå†…ç½‘hosts")]),s._v(" "),t("p",[s._v("åæ¥è¿˜æœ‰ä¸€äº›å†…ç½‘çš„è‡ªå®šä¹‰hostsè§£æï¼Œå› ä¸ºæ²¡æœ‰ä¸Šå…¬ç½‘ï¼Œæ‰€ä»¥éœ€è¦podè‡ªè¡ŒåŠ hostsè§£æ")]),s._v(" "),t("p",[s._v("åˆšå¼€æ˜¯ç ”ç©¶ä½¿ç”¨dockerfile+è„šæœ¬ï¼Œç»™å®¹å™¨å¼ºåŠ hostsï¼Œåæ¥å‘ç°è™½ç„¶å¯è¡Œï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰é—®é¢˜ï¼Œå¹¶ä¸”è¿™ç§åšæ³•åœ¨ç›®å‰çœ‹æ¥æ˜¯ååˆ†è½åå’Œæ„šè ¢çš„")]),s._v(" "),t("p",[s._v("å› ä¸ºåé¢æœ‰æ›´å¥½çš„æ–¹æ¡ˆï¼Œè¿™é‡Œå°±ä¸æ”¾æ€ä¹ˆé€ è½®å­äº†ã€‚ã€‚ã€‚å…å¾—è¯¯å¯¼è§‚ä¼—")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"hostaliases"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hostaliases"}},[s._v("#")]),s._v(" HostAliases")]),s._v(" "),t("p",[s._v("åæ¥å‘ç°ä»1.7ç‰ˆæœ¬å¼€å§‹ï¼Œk8sæ”¯æŒäº† HostAliases ç‰¹æ€§ï¼š "),t("code",[s._v(".spec.hostAliases")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("div",{staticClass:"highlight-lines"},[t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("div",{staticClass:"highlighted"},[s._v("Â ")]),t("div",{staticClass:"highlighted"},[s._v("Â ")]),t("div",{staticClass:"highlighted"},[s._v("Â ")]),t("div",{staticClass:"highlighted"},[s._v("Â ")]),t("div",{staticClass:"highlighted"},[s._v("Â ")]),t("div",{staticClass:"highlighted"},[s._v("Â ")]),t("div",{staticClass:"highlighted"},[s._v("Â ")]),t("div",{staticClass:"highlighted"},[s._v("Â ")]),t("div",{staticClass:"highlighted"},[s._v("Â ")]),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br")]),t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master yaml"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat paas-app/paas-gateway-server.yaml ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ------------------- App Deployment ------------------- #")]),s._v("\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: paas-gateway-server\nspec:\n  replicas: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n  template:\n    metadata:\n      labels:\n        app: paas-gateway-server\n    spec:\n      hostAliases:\n      - ip: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.255.0.170"')]),s._v("\n        hostnames:\n        - "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"paas-nacos-register"')]),s._v("\n        - "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"paas-nacos-config"')]),s._v("\n      - ip: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.1.2.3"')]),s._v("\n        hostnames:\n        - "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"foo.remote"')]),s._v("\n        - "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bar.remote"')]),s._v("\n      containers:\n        - name: paas-gateway-server\n          image: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'registry:5000/paas-gateway-server:latest'")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#imagePullPolicy: IfNotPresent")]),s._v("\n          imagePullPolicy: Always\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br")])]),t("p",[s._v("ç™»é™†podæŸ¥çœ‹hosts")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("div",{staticClass:"highlight-lines"},[t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("div",{staticClass:"highlighted"},[s._v("Â ")]),t("div",{staticClass:"highlighted"},[s._v("Â ")]),t("div",{staticClass:"highlighted"},[s._v("Â ")]),t("br"),t("br")]),t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master yaml"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl exec -it paas-gateway-server-68f8d6f8fb-jkvn6 -- /bin/bash")]),s._v("\nroot@paas-gateway-server-68f8d6f8fb-jkvn6:/app"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/hosts")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Kubernetes-managed hosts file.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1       localhost\n::1     localhost ip6-localhost ip6-loopback\nfe00::0 ip6-localnet\nfe00::0 ip6-mcastprefix\nfe00::1 ip6-allnodes\nfe00::2 ip6-allrouters\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.254")]),s._v(".31.3     paas-gateway-server-68f8d6f8fb-jkvn6\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Entries added by HostAliases.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.255")]),s._v(".0.170    paas-nacos-register     paas-nacos-config\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.1")]),s._v(".2.3        foo.remote      bar.remote\nroot@paas-gateway-server-68f8d6f8fb-jkvn6:/app"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])]),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[s._v("è¿™æ ·å­å°±å®Œç¾è§£å†³äº†")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"coredns"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#coredns"}},[s._v("#")]),s._v(" CoreDNS")]),s._v(" "),t("p",[s._v("åæ¥å› ä¸ºå®‰è£…"),t("a",{attrs:{href:"https://kubesphere.com.cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("kubesphere"),t("OutboundLink")],1),s._v("ï¼Œä½¿ç”¨devposçš„æ—¶å€™éœ€è¦æ·»åŠ registryè§£æï¼Œå‘ç°devopsç›¸å…³çš„yamléƒ½éœ€è¦åŠ ä¸€éhostAliases")]),s._v(" "),t("p",[t("strong",[s._v("è¿™æ ·å­å¼Šç«¯å°±å‡ºç°äº†ï¼Œä¸šåŠ¡ä¸€æ—¦å¤šèµ·æ¥ï¼Œå°±å¾ˆéš¾ç»´æŠ¤")])]),s._v(" "),t("p",[t("strong",[s._v("æ¥ç€åˆå‘ç°ä¸€ä¸ªæ›´å…ˆè¿›çš„dnsç³»ç»Ÿ-----CoreDNS")])]),s._v(" "),t("p",[s._v("ä» v1.11 å¼€å§‹å¯ä»¥ä½¿ç”¨ CoreDNS æ¥æä¾›å‘½åæœåŠ¡ï¼Œå¹¶ä» v1.13 å¼€å§‹æˆä¸ºé»˜è®¤ DNS æœåŠ¡ã€‚CoreDNS çš„ç‰¹ç‚¹æ˜¯æ•ˆç‡æ›´é«˜ï¼Œèµ„æºå ç”¨ç‡æ›´å°ï¼Œæ¨èä½¿ç”¨ CoreDNS æ›¿ä»£ kube-dns ä¸ºé›†ç¾¤æä¾› DNS æœåŠ¡ã€‚")]),s._v(" "),t("p",[s._v("ä» kube-dns å‡çº§ä¸º CoreDNS çš„æ­¥éª¤ä¸ºï¼š")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/coredns/deployment\n$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" deployment/kubernetes\n$ ./deploy.sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" kubectl apply -f -\n$ kubectl delete --namespace"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("kube-system deployment kube-dns\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("å…¨æ–°éƒ¨ç½²CoreDNS")]),s._v(" "),t("p",[s._v("ä¿®æ”¹REVERSE_CIDRSã€DNS_DOMAINã€CLUSTER_DNS_IPç­‰å˜é‡ä¸ºå®é™…å€¼")]),s._v(" "),t("p",[s._v("å…·ä½“å‘½ä»¤")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("./deploy.sh -s -r "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.254")]),s._v(".0.0/16 -i "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.254")]),s._v(".0.100 -d cluster.local "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" coredns.yaml\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("diff")]),s._v(" coredns.yaml coredns.yaml.sed\nkubectl create -f coredns.yaml\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("è¿™é‡Œä¸ç”¨æ‹…å¿ƒé•œåƒè¢«Qï¼Œéƒ½æ˜¯å¯ä»¥ä¸‹ä¸‹æ¥çš„ï¼Œä¸åƒkube-dnsçš„é•œåƒéƒ½æ˜¯googleä¸Šçš„~~")]),s._v(" "),t("p",[s._v("ä¸‹é¢å°±å±•ç¤ºä¸€ä¸‹ä½¿ç”¨CoreDNSæ·»åŠ è‡ªå®šä¹‰DNSè§£æè®°å½•")]),s._v(" "),t("p",[s._v("coredns è‡ªå¸¦ hosts æ’ä»¶ï¼Œ å…è®¸åƒé…ç½® hosts ä¸€æ ·é…ç½®è‡ªå®šä¹‰ DNS è§£æï¼Œä¿®æ”¹ kube-system ä¸­ configMap çš„ coredns æ·»åŠ å¦‚ä¸‹æ ‡é»‘è®¾ç½®å³å¯ã€‚")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("div",{staticClass:"highlight-lines"},[t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("div",{staticClass:"highlighted"},[s._v("Â ")]),t("div",{staticClass:"highlighted"},[s._v("Â ")]),t("div",{staticClass:"highlighted"},[s._v("Â ")]),t("div",{staticClass:"highlighted"},[s._v("Â ")]),t("div",{staticClass:"highlighted"},[s._v("Â ")]),t("div",{staticClass:"highlighted"},[s._v("Â ")]),t("div",{staticClass:"highlighted"},[s._v("Â ")]),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br")]),t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat coredns/kubernetes/coredns.yaml")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: coredns\n  namespace: kube-system\ndata:\n  Corefile: "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n    .:53 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        errors\n        health "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          lameduck 5s\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        ready\n        kubernetes cluster.local  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.254")]),s._v(".0.0/16 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          pods insecure\n          fallthrough in-addr.arpa ip6.arpa\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        hosts "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.255")]),s._v(".0.170 registry\n            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.127")]),s._v(".0.16 paas-nacos-register\n            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.127")]),s._v(".0.16 paas-nacos-config\n\n            fallthrough\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        prometheus :9153\n        forward "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" /etc/resolv.conf\n        cache "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\n        loop\n        reload\n        loadbalance\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n---\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br")])]),t("p",[s._v("ä¹Ÿå¯ä»¥ä½¿ç”¨")]),s._v(" "),t("p",[t("code",[s._v("kubectl edit configmap coredns -n kube-system -o yaml")])]),s._v(" "),t("p",[s._v("è¯¥å‘½ä»¤å¯ç¼–è¾‘ coredns çš„é…ç½®æ–‡ä»¶ï¼Œç¼–è¾‘ data å­—æ®µå³å¯ï¼Œå³æ—¶ç”Ÿæ•ˆ")]),s._v(" "),t("p",[s._v("éªŒè¯")]),s._v(" "),t("p",[s._v("åˆ é™¤yamlé‡Œé¢çš„hostAliasesé…ç½®ï¼Œé‡æ–° kubectl apply")]),s._v(" "),t("p",[s._v("ç™»é™†å®¹å™¨pingä¸€ä¸‹")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master paas-app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl exec -it paas-gateway-server-8c6fb49ff-xd9tq -- /bin/bash")]),s._v("\nroot@paas-gateway-server-8c6fb49ff-xd9tq:/app"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/hosts")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Kubernetes-managed hosts file.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1       localhost\n::1     localhost ip6-localhost ip6-loopback\nfe00::0 ip6-localnet\nfe00::0 ip6-mcastprefix\nfe00::1 ip6-allnodes\nfe00::2 ip6-allrouters\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.254")]),s._v(".31.3     paas-gateway-server-8c6fb49ff-xd9tq\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## hostsé…ç½®æ²¡æœ‰äº†ï¼Œç”±äºcorednsç›´æ¥åœ¨æœ€ä¸Šæ¸¸å®šä¹‰äº†hostsï¼Œæ‰€ä»¥è‡ªå®šä¹‰çš„è§£æç”Ÿæ•ˆäº†")]),s._v("\n\nroot@paas-gateway-server-8c6fb49ff-xd9tq:/app"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ping registry")]),s._v("\nPING registry "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.255")]),s._v(".0.170"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),s._v(" data bytes\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.255")]),s._v(".0.170: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("63")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.306")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.255")]),s._v(".0.170: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("63")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.278")]),s._v(" ms\n^C--- registry "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" statistics ---\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" packets transmitted, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" packets received, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% packet loss\nround-trip min/avg/max/stddev "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.278")]),s._v("/0.292/0.306/0.000 ms\nroot@paas-gateway-server-8c6fb49ff-xd9tq:/app"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("p",[s._v("å¯è§å³ä½¿æœ‰åœ¨å¤šçš„ä¸šåŠ¡ï¼Œåªè¦corednsåŠ äº†è§£æï¼Œéƒ½ä¸æ˜¯é—®é¢˜")]),s._v(" "),t("p",[t("strong",[s._v("åœ¨æ­¤å¼ºåŠ›æ¨ècorednsæ–¹æ¡ˆï¼ˆæš‚æ—¶ï¼Œå¦‚æœè¿˜æœ‰æ›´å¥½çš„æ–¹æ¡ˆã€‚ã€‚ ğŸ˜‚ ğŸ˜‚ ğŸ˜‚ï¼‰")])]),s._v(" "),t("hr"),s._v(" "),t("p",[s._v("å½“ç„¶å¦‚æœå†…ç½‘æœ‰ä¸“é—¨çš„DNSæœåŠ¡å™¨ï¼›corednsæ”¯æŒé…ç½®ç§æœ‰ DNS æœåŠ¡å™¨å’Œä¸Šæ¸¸ DNS æœåŠ¡å™¨ï¼Œæ­¤å¤„å°±ä¸æ·±ç©¶äº†ï¼Œè¯¦è§å®˜æ–¹æ–‡æ¡£")]),s._v(" "),t("p",[s._v("https://kubernetes.io/zh/docs/tasks/administer-cluster/dns-custom-nameservers/")]),s._v(" "),t("hr"),s._v(" "),t("p",[s._v("å‚è€ƒ")]),s._v(" "),t("p",[s._v("https://ieevee.com/tech/2018/04/29/k8s-hostaliases.html")]),s._v(" "),t("p",[s._v("https://kubernetes.feisky.xyz/setup/addon-list/kube-dns#kube-dns")]),s._v(" "),t("p",[s._v("https://blog.csdn.net/kunyus/article/details/88841159")]),s._v(" "),t("p",[s._v("https://kubesphere.io/docs/v2.1/zh-CN/system-settings/edit-system-settings/#%E5%A6%82%E4%BD%95%E4%BF%AE%E6%94%B9-coredns-%E9%85%8D%E7%BD%AE")])])}),[],!1,null,null,null);a.default=e.exports}}]);