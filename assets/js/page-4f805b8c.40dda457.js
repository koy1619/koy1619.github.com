(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{356:function(e,r,b){"use strict";b.r(r);var a=b(1),v=Object(a.a)({},(function(){var e=this,r=e.$createElement,b=e._self._c||r;return b("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[b("h1",{attrs:{id:"zabbix的server端安装配置"}},[b("a",{staticClass:"header-anchor",attrs:{href:"#zabbix的server端安装配置","aria-hidden":"true"}},[e._v("#")]),e._v(" zabbix的server端安装配置")]),e._v(" "),b("p",[e._v("之前玩过cacti和nagios，算是一个大家耳熟能详的业内常用的的网管互补组合，但个人感觉前者由于调用snmp协议，导致有时候在网络不太稳定时会有数据丢失情况，后者nagios虽然不依赖于SNMP，但客户端的复杂的安装，初始配置以及需要读懂插件语法导致会让很多初学者望而却步。"),b("br"),e._v("\nzabbix不仅吸取了两者的制图和动态监测的优点，而且很多插件以及常用脚本模板都是系统自带，最重要的配置相对于前两者简洁了很多，所以省去了很多学习成本，加之该监控系统是利用PHP语言写的，系统个人定制就无需使用者修改底层代码，而可以直接在WEB界面去按照自己的偏好设置，支持字体修改以及简体中文。")]),e._v(" "),b("p",[e._v("1."),b("a",{attrs:{href:"http://www.zabbix.com/download.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("下载zabbix"),b("OutboundLink")],1)]),e._v(" "),b("p",[e._v("2.安装zabbix所需的组件")]),e._v(" "),b("pre",[e._v("yum -y install curl curl-devel net-snmp net-snmp-devel perl-DBI")]),e._v(" "),b("p",[e._v("3.创建用户账号")]),e._v(" "),b("pre",[e._v("groupadd zabbix\nuseradd -g zabbix zabbix\nusermod -s /sbin/nologin zabbix\n")]),e._v(" "),b("p",[e._v("4.创建zabbix数据库并导入zabbix数据库数据")]),e._v(" "),b("pre",[e._v("mysql -u root -p123456\ngrant all on zabbix.* to zabbix@localhost identified by '123456';\ncreate database zabbix;\nexit;\ntar zxvf zabbix-2.2.3.tar.gz\ncd zabbix-2.2.3\nmysql -uzabbix -p123456 zabbix < database/mysql/schema.sql\nmysql -uzabbix -p123456 zabbix < database/mysql/images.sql\nmysql -uzabbix -p123456 zabbix < database/mysql/data.sql\n")]),e._v(" "),b("p",[e._v("5.编译安装(server,agent)")]),e._v(" "),b("pre",[b("code",[e._v("./configure --prefix=/usr/local/zabbix-server --enable-server --enable-agent --with-mysql=/usr/local/mysql/bin/mysql_config --enable-ipv6 --with-net-snmp --with-libcurl\nmake install\n")])]),e._v(" "),b("p",[e._v("6.编辑server端配置文件")]),e._v(" "),b("pre",[e._v("vi /usr/local/zabbix-server/etc/zabbix_server.conf")]),e._v(" "),b("p",[e._v("修改以下参数")]),e._v(" "),b("pre",[e._v("LogFile=/tmp/zabbix_server.log\nDBHost=localhost\nDBPort=3306\nDBName=zabbix \nDBUser=zabbix \nDBPassword=123456\n")]),e._v(" "),b("p",[e._v("7、启动守护进程server")]),e._v(" "),b("p",[e._v("在服务器端运行启动zabbix_server")]),e._v(" "),b("pre",[e._v("/usr/local/zabbix-server/sbin/zabbix_server")]),e._v(" "),b("p",[e._v("server启动端口为10051")]),e._v(" "),b("p",[e._v("iptables放行zabbix-server的10051端口")]),e._v(" "),b("pre",[e._v("iptables -A INPUT -p tcp  --dport 10051 -j ACCEPT")]),e._v(" "),b("p",[e._v("注：重启服务可直接kill掉zabbix进程再重新按照以上方法启动")]),e._v(" "),b("p",[e._v("或配置开机启动脚本：")]),e._v(" "),b("pre",[e._v("cd zabbix-2.2.2\ncp misc/init.d/tru64/zabbix_server   /etc/init.d/zabbix_server\nchmod 755 /etc/init.d/zabbix_server")]),e._v(" "),b("pre",[e._v("vi /etc/init.d/zabbix_server")]),e._v(" "),b("p",[e._v("在文件头部的#!/bin/sh行下分别添加如下两行：")]),e._v(" "),b("pre",[e._v("--------------\n#chkconfig: 35 95 95\n#description:zabbix server\n--------------")]),e._v(" "),b("p",[e._v("将DAEMON后面的参数改成你自定义的路径")]),e._v(" "),b("pre",[e._v("DAEMON=/usr/local/zabbix-server/sbin/zabbix_server")]),e._v(" "),b("p",[e._v("加入开机启动")]),e._v(" "),b("pre",[e._v("chkconfig --add zabbix_server  \nchkconfig zabbix_server on")]),e._v(" "),b("p",[e._v("重启服务：")]),e._v(" "),b("pre",[e._v("service zabbix_server restart")]),e._v(" "),b("p",[e._v("8.安装zabbix web界面"),b("br"),e._v("\n复制ZABBIX PHP源代码文件"),b("br"),e._v("\nzabbix的服务端程序是用php写的，因此需要一个支持php架构的服务器平台"),b("br"),e._v("\n现在将ZABBIX安装目录下frontends/php下面的php源代码文件拷贝到web服务器html文件目录下面。")]),e._v(" "),b("p",[e._v("访问URL，安装过程中碰到的各种php扩展自行查找安装，直到调通全部OK！到此zabbix的server端配置完成。")])])}),[],!1,null,null,null);r.default=v.exports}}]);