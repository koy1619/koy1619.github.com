(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{312:function(t,s,a){"use strict";a.r(s);var e={data:function(){return{form:{checked:[]},rules:{checked:[{validator:function(t,s,a){s.length<5?a(new Error("è¯·ç¡®è®¤æ‚¨çš„ç¯å¢ƒç¬¦åˆä¸Šè¿°æ¡ä»¶")):a()},trigger:"change"}]}}},computed:{envOk:function(){return 5===this.form.checked.length}},mounted:function(){},watch:{"form.checked":function(){this.form.checked.length},envOk:function(){this.envOk&&this.$sendGaEvent("install-k8s","envOk","å®‰è£…k8s-å·²ç¡®è®¤ç¯å¢ƒç¬¦åˆæ¡ä»¶")}},methods:{downloadDiagram:function(){console.log("å°è¯•å‘é€ ga event"),window.ga?(window.ga("send",{hitType:"event",eventCategory:"å®‰è£…K8S",eventAction:"Download",eventLabel:"ä¸‹è½½æ‹“æ‰‘å›¾æºæ–‡ä»¶"}),console.log("å‘é€æˆåŠŸ ga event")):console.log("å¼€å‘ç¯å¢ƒï¼Œä¸å‘é€ ga event")},canSlideNext:function(t){return"step1"===t&&this.form.checked.length<5?(this.$refs.envForm.validate((function(t){})),{flag:!1,message:"è¯·ç¿»åˆ°æœ¬é¡µæœ€ä¸‹æ–¹ï¼Œå¹¶ç¡®è®¤æ‚¨çš„ç¯å¢ƒç¬¦åˆè¦æ±‚çš„æ¡ä»¶"}):{flag:!0,message:"can slide next"}}}},n=a(2),r=Object(n.a)(e,(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"ä½¿ç”¨kubeadmå®‰è£…kubernetes-v1-16-1-è½¬è½½"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨kubeadmå®‰è£…kubernetes-v1-16-1-è½¬è½½","aria-hidden":"true"}},[t._v("#")]),t._v(" ä½¿ç”¨kubeadmå®‰è£…kubernetes_v1.16.1-è½¬è½½")]),t._v(" "),a("h2",{attrs:{id:"æ–‡æ¡£ç‰¹ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ–‡æ¡£ç‰¹ç‚¹","aria-hidden":"true"}},[t._v("#")]),t._v(" æ–‡æ¡£ç‰¹ç‚¹")]),t._v(" "),a("grid",{attrs:{rwd:{compact:"stack"}}},[a("grid-item",{staticStyle:{padding:"1rem 0 1rem 1rem"},attrs:{size:"2/3",rwd:{tablet:"1/1",compact:"1/1"}}},[a("div",[a("p",[a("strong",[t._v("ç½‘ä¸Šé‚£ä¹ˆå¤š Kubernetes å®‰è£…æ–‡æ¡£ï¼Œä¸ºä»€ä¹ˆè¿™ç¯‡æ–‡æ¡£æ›´æœ‰å‚è€ƒä»·å€¼ï¼Ÿ")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("ä¼—å¤šç½‘å‹éªŒè¯")])]),t._v(" "),a("ul",[a("li",[t._v("æ¯å¤©æœ‰è¶…è¿‡ 300 äººå‚ç…§æ­¤æ–‡æ¡£å®Œæˆ Kubernetes å®‰è£…")]),t._v(" "),a("li",[t._v("ä¸æ–­æœ‰ç½‘å‹å¯¹å®‰è£…æ–‡æ¡£æå‡ºæ”¹è¿›æ„è§")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("æŒç»­æ›´æ–°å’Œå®Œå–„")])]),t._v(" "),a("ul",[a("li",[t._v("å§‹ç»ˆæœ‰æœ€æ–°çš„ Kubernetes ç¨³å®šç‰ˆå®‰è£…æ–‡æ¡£ï¼Œå½“å‰ç‰ˆæœ¬ v1.16.1")]),t._v(" "),a("li",[t._v("å½“å‰å·²æ›´æ–°äº† "),a("font",{attrs:{color:"red"}},[t._v(" 60 æ¬¡ ")]),t._v("ï¼Œ "),a("a",{attrs:{href:"https://github.com/eip-work/kuboard-press/commits/master/install/install-k8s.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("æŸ¥çœ‹æ›´æ–°å†å²"),a("OutboundLink")],1)],1)])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("åœ¨çº¿ç­”ç–‘")])]),t._v(" "),a("Qq"),t._v(" QQç¾¤å·ä¸ºï¼š808894550ï¼Œä¹Ÿå¯ä»¥æ‰«æäºŒç»´ç åŠ ç¾¤\n"),a("p",[a("img",{attrs:{src:"/images/kuboard_qq.png",alt:"Kuberneteså®‰è£…ï¼šQQç¾¤åœ¨çº¿ç­”ç–‘"}})])],1)])])]),t._v(" "),a("grid-item",{staticStyle:{padding:"2rem 1rem 1rem 1rem"},attrs:{size:"1/3",rwd:{tablet:"1/1",compact:"0/1"}}},[a("AdSenseVertical")],1)],1),t._v(" "),a("h2",{attrs:{id:"é…ç½®è¦æ±‚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é…ç½®è¦æ±‚","aria-hidden":"true"}},[t._v("#")]),t._v(" é…ç½®è¦æ±‚")]),t._v(" "),a("p",[t._v("å¯¹äº Kubernetes åˆå­¦è€…ï¼Œæ¨èåœ¨é˜¿é‡Œäº‘æˆ–è…¾è®¯äº‘é‡‡è´­å¦‚ä¸‹é…ç½®ï¼šï¼ˆæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå·±çš„è™šæ‹Ÿæœºã€ç§æœ‰äº‘ç­‰æ‚¨æœ€å®¹æ˜“è·å¾—çš„ Linux ç¯å¢ƒï¼‰")]),t._v(" "),a("ul",[a("li",[t._v("3å° "),a("strong",[t._v("2æ ¸4G")]),t._v(" çš„ECSï¼ˆçªå‘æ€§èƒ½å®ä¾‹ t5 ecs.t5-c1m2.largeæˆ–åŒç­‰é…ç½®ï¼Œå•å°çº¦ 0.4å…ƒ/å°æ—¶ï¼Œåœæœºæ—¶ä¸æ”¶è´¹ï¼‰")]),t._v(" "),a("li",[a("strong",[t._v("Cent OS 7.6")])])]),t._v(" "),a("grid",{attrs:{rwd:{compact:"stack"}}},[a("grid-item",{staticStyle:{padding:"1rem 0 1rem 1rem"},attrs:{size:"2/3",rwd:{tablet:"1/1",compact:"1/1"}}},[a("div",[a("p",[a("a",{attrs:{href:"https://cloud.tencent.com/act/cps/redirect?redirect=1040&cps_key=2ee6baa049659f4713ddc55a51314372&from=console",target:"_blank",rel:"noopener noreferrer"}},[t._v("é¢†å–è…¾è®¯äº‘æœ€é«˜2860å…ƒä»£é‡‘åˆ¸"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://cloud.tencent.com/act/cps/redirect?redirect=1044&cps_key=2ee6baa049659f4713ddc55a51314372&from=console",target:"_blank",rel:"noopener noreferrer"}},[t._v("è…¾è®¯äº‘é™æ—¶1æŠ˜ç§’æ€"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=obezo3pg",target:"_blank",rel:"noopener noreferrer"}},[t._v("é¢†å–é˜¿é‡Œäº‘æœ€é«˜2000å…ƒçº¢åŒ…"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.aliyun.com/acts/limit-buy?userCode=obezo3pg",target:"_blank",rel:"noopener noreferrer"}},[t._v("é˜¿é‡Œäº‘æœåŠ¡å™¨é™æ—¶2æŠ˜"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("strong",[t._v("å®‰è£…åçš„è½¯ä»¶ç‰ˆæœ¬ä¸º")])]),t._v(" "),a("ul",[a("li",[t._v("Kubernetes v1.16.1\n"),a("ul",[a("li",[t._v("calico 3.8.2")]),t._v(" "),a("li",[t._v("nginx-ingress 1.5.5")])])]),t._v(" "),a("li",[t._v("Docker 18.09.7")])]),t._v(" "),a("blockquote",[a("p",[t._v("å¦‚æœè¦å®‰è£… Kubernetes å†å²ç‰ˆæœ¬ï¼Œè¯·å‚è€ƒï¼š")]),t._v(" "),a("ul",[a("li",[a("router-link",{attrs:{to:"/install/history-k8s/install-k8s-1.16.0.html"}},[t._v("å®‰è£… Kubernetes v1.16.0 å•MasterèŠ‚ç‚¹")])],1),t._v(" "),a("li",[a("router-link",{attrs:{to:"/install/history-k8s/install-k8s-1.15.4.html"}},[t._v("å®‰è£… Kubernetes v1.15.4 å•MasterèŠ‚ç‚¹")])],1),t._v(" "),a("li",[a("router-link",{attrs:{to:"/install/history-k8s/install-k8s-1.15.3.html"}},[t._v("å®‰è£… Kubernetes v1.15.3 å•MasterèŠ‚ç‚¹")])],1),t._v(" "),a("li",[a("router-link",{attrs:{to:"/install/history-k8s/install-k8s-1.15.2.html"}},[t._v("å®‰è£… Kubernetes v1.15.2 å•MasterèŠ‚ç‚¹")])],1),t._v(" "),a("li",[a("router-link",{attrs:{to:"/install/history-k8s/install-k8s-1.15.1.html"}},[t._v("å®‰è£… Kubernetes v1.15.1 å•MasterèŠ‚ç‚¹")])],1)])])])]),t._v(" "),a("grid-item",{staticStyle:{padding:"2rem 1rem 1rem 1rem"},attrs:{size:"1/3",rwd:{tablet:"1/1",compact:"0/1"}}},[a("AdSenseVertical")],1)],1),t._v(" "),a("p",[t._v("å®‰è£…åçš„æ‹“æ‰‘å›¾å¦‚ä¸‹ï¼š"),a("span",{on:{click:t.downloadDiagram}},[a("a",{attrs:{href:t.$withBase("/kuboard.rp"),download:"www.kuboard.cn.rp"}},[t._v("ä¸‹è½½æ‹“æ‰‘å›¾æºæ–‡ä»¶")])]),t._v(" "),a("font",{attrs:{color:"#999"}},[t._v("ä½¿ç”¨Axure RP 9.0å¯æ‰“å¼€è¯¥æ–‡ä»¶")])],1),t._v(" "),a("p",{staticStyle:{"max-width":"720px"}},[a("img",{staticStyle:{"max-width":"100%"},attrs:{src:"/images/topology/k8s.png",alt:"Kuberneteså®‰è£…ï¼šKuberneteså®‰è£…æ‹“æ‰‘å›¾"}})]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[a("strong",[t._v("å…³äºäºŒè¿›åˆ¶å®‰è£…")])]),t._v(" "),a("p",[t._v("é‰´äºç›®å‰å·²ç»æœ‰æ¯”è¾ƒæ–¹ä¾¿çš„åŠæ³•è·å¾— kubernetes é•œåƒï¼Œæˆ‘å°†å›é¿ "),a("em",[a("strong",[t._v("äºŒè¿›åˆ¶")])]),t._v(" å®‰è£…æ˜¯å¦æ›´å¥½çš„äº‰è®ºã€‚æœ¬æ–‡é‡‡ç”¨ kubernetes.io å®˜æ–¹æ¨èçš„ kubeadm å·¥å…·å®‰è£… kubernetes é›†ç¾¤ã€‚")])]),t._v(" "),a("h2",{attrs:{id:"æ£€æŸ¥-centos-hostname"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ£€æŸ¥-centos-hostname","aria-hidden":"true"}},[t._v("#")]),t._v(" æ£€æŸ¥ centos / hostname")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åœ¨ master èŠ‚ç‚¹å’Œ worker èŠ‚ç‚¹éƒ½è¦æ‰§è¡Œ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /etc/redhat-release\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ­¤å¤„ hostname çš„è¾“å‡ºå°†ä¼šæ˜¯è¯¥æœºå™¨åœ¨ Kubernetes é›†ç¾¤ä¸­çš„èŠ‚ç‚¹åå­—")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä¸èƒ½ä½¿ç”¨ localhost ä½œä¸ºèŠ‚ç‚¹çš„åå­—")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hostname")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è¯·ä½¿ç”¨ lscpu å‘½ä»¤ï¼Œæ ¸å¯¹ CPU ä¿¡æ¯")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Architecture: x86_64    æœ¬å®‰è£…æ–‡æ¡£ä¸æ”¯æŒ arm æ¶æ„")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# CPU(s):       2         CPU å†…æ ¸æ•°é‡ä¸èƒ½ä½äº 2")]),t._v("\nlscpu\n")])])]),a("p",[a("strong",[t._v("æ“ä½œç³»ç»Ÿå…¼å®¹æ€§")])]),t._v(" "),a("grid",{attrs:{rwd:{compact:"stack"}}},[a("grid-item",{staticStyle:{padding:"1rem 0 1rem 1rem"},attrs:{size:"2/3",rwd:{tablet:"1/1",compact:"1/1"}}},[a("div",[a("table",[a("thead",[a("tr",[a("th",[t._v("CentOS ç‰ˆæœ¬")]),t._v(" "),a("th",[t._v("æœ¬æ–‡æ¡£æ˜¯å¦å…¼å®¹")]),t._v(" "),a("th",[t._v("å¤‡æ³¨")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("7.7")]),t._v(" "),a("td",[a("span",{staticStyle:{"font-size":"24px"}},[t._v("ğŸ˜„")])]),t._v(" "),a("td",[t._v("å·²éªŒè¯")])]),t._v(" "),a("tr",[a("td",[t._v("7.6")]),t._v(" "),a("td",[a("span",{staticStyle:{"font-size":"24px"}},[t._v("ğŸ˜„")])]),t._v(" "),a("td",[t._v("å·²éªŒè¯")])]),t._v(" "),a("tr",[a("td",[t._v("7.5")]),t._v(" "),a("td",[a("span",{staticStyle:{"font-size":"24px"}},[t._v("ğŸ˜„")])]),t._v(" "),a("td",[t._v("å·²éªŒè¯")])]),t._v(" "),a("tr",[a("td",[t._v("7.4")]),t._v(" "),a("td",[a("span",{staticStyle:{"font-size":"24px"}},[t._v("ğŸ¤”")])]),t._v(" "),a("td",[t._v("å¾…éªŒè¯")])]),t._v(" "),a("tr",[a("td",[t._v("7.3")]),t._v(" "),a("td",[a("span",{staticStyle:{"font-size":"24px"}},[t._v("ğŸ¤”")])]),t._v(" "),a("td",[t._v("å¾…éªŒè¯")])]),t._v(" "),a("tr",[a("td",[t._v("7.2")]),t._v(" "),a("td",[a("span",{staticStyle:{"font-size":"24px"}},[t._v("ğŸ˜")])]),t._v(" "),a("td",[t._v("å·²è¯å®ä¼šå‡ºç° kubelet æ— æ³•å¯åŠ¨çš„é—®é¢˜")])])])])])]),t._v(" "),a("grid-item",{staticStyle:{padding:"2rem 1rem 1rem 1rem"},attrs:{size:"1/3",rwd:{tablet:"1/1",compact:"0/1"}}},[a("AdSenseVertical")],1)],1),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("ä¿®æ”¹ hostname")]),t._v(" "),a("p",[t._v("å¦‚æœæ‚¨éœ€è¦ä¿®æ”¹ hostnameï¼Œå¯æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼š")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä¿®æ”¹ hostname")]),t._v("\nhostnamectl set-hostname your-new-host-name\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æŸ¥çœ‹ä¿®æ”¹ç»“æœ")]),t._v("\nhostnamectl status\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è®¾ç½® hostname è§£æ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"127.0.0.1   '),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hostname")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /etc/hosts\n")])])])]),t._v(" "),a("h2",{attrs:{id:"å®‰è£…-docker-kubelet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…-docker-kubelet","aria-hidden":"true"}},[t._v("#")]),t._v(" å®‰è£… docker / kubelet")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.envOk,expression:"!envOk"}],key:"not"},[a("grid",{attrs:{rwd:{compact:"stack"}}},[a("grid-item",{staticStyle:{padding:"1rem 0 1rem 1rem"},attrs:{size:"2/3",rwd:{tablet:"1/1",compact:"1/1"}}},[a("div",[a("div",{staticClass:"danger custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("å¿…é¡»é€‰ä¸­ä¸‹é¢çš„å››ä¸ªå‹¾é€‰æ¡†æ‰èƒ½ç»§ç»­")]),t._v(" "),a("ul",[a("li",[t._v("é€‰ä¸­åæ˜¾ç¤º "),a("strong",[t._v("å®‰è£… docker/kubelet çš„æ–‡æ¡£")])])]),t._v(" "),a("div",{staticStyle:{display:"inline-block",width:"480px","max-width":"calc(100vw - 100px)",overflow:"hidden","line-height":"40px","background-color":"rgba(255,229,100,0.3)",padding:"20px 0 0 20px","margin-bottom":"20px",border:"1px solid #d7dae2"}},[a("el-form",{ref:"envForm",staticStyle:{"text-align":"left"},attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{staticClass:"env-form-item",attrs:{prop:"checked"}},[a("el-checkbox-group",{model:{value:t.form.checked,callback:function(s){t.$set(t.form,"checked",s)},expression:"form.checked"}},[a("li",{staticStyle:{height:"40px"}},[a("el-checkbox",{staticStyle:{width:"300px","max-width":"calc(100vw - 100px)","text-align":"left"},attrs:{label:"centos"}},[t._v("æˆ‘çš„ä»»æ„èŠ‚ç‚¹ centos ç‰ˆæœ¬åœ¨å…¼å®¹åˆ—è¡¨ä¸­")])],1),t._v(" "),a("li",{staticStyle:{height:"40px"}},[a("el-checkbox",{staticStyle:{width:"300px","max-width":"calc(100vw - 100px)","text-align":"left"},attrs:{label:"hostname"}},[t._v("æˆ‘çš„ä»»æ„èŠ‚ç‚¹ hostname ä¸æ˜¯ localhostï¼Œä¸”ä¸åŒ…å«ä¸‹åˆ’çº¿")])],1),t._v(" "),a("li",{staticStyle:{height:"40px"}},[a("el-checkbox",{staticStyle:{width:"300px","max-width":"calc(100vw - 100px)","text-align":"left"},attrs:{label:"cpu"}},[t._v("æˆ‘çš„ä»»æ„èŠ‚ç‚¹ CPU å†…æ ¸æ•°é‡å¤§äºç­‰äº 2")])],1),t._v(" "),a("li",{staticStyle:{height:"40px"}},[a("el-checkbox",{staticStyle:{width:"300px","max-width":"calc(100vw - 100px)","text-align":"left"},attrs:{label:"docker"}},[t._v("æˆ‘çš„ä»»æ„èŠ‚ç‚¹ä¸ä¼šç›´æ¥ä½¿ç”¨ docker run æˆ– docker-compose è¿è¡Œå®¹å™¨")])],1),t._v(" "),a("li",{staticStyle:{height:"40px"}},[a("el-checkbox",{staticStyle:{width:"300px","max-width":"calc(100vw - 100px)","text-align":"left"},attrs:{label:"networkcard"}},[t._v("æˆ‘çš„ä»»æ„èŠ‚ç‚¹åªæœ‰ä¸€å—ç½‘å¡ï¼ˆå¯ä»¥åœ¨å®ŒæˆK8Så®‰è£…åå†æ·»åŠ ç½‘å¡ï¼‰")])],1)])],1)],1)],1)])])]),t._v(" "),a("grid-item",{staticStyle:{padding:"2rem 1rem 1rem 1rem"},attrs:{size:"1/3",rwd:{tablet:"1/1",compact:"0/1"}}},[a("AdSenseSquare")],1)],1)],1),t._v(" "),a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.envOk,expression:"envOk"}],key:"ok"},[a("p",[t._v("ä½¿ç”¨ root èº«ä»½åœ¨æ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œå¦‚ä¸‹ä»£ç ï¼Œä»¥å®‰è£…è½¯ä»¶ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("docker")]),t._v(" "),a("li",[t._v("nfs-utils")]),t._v(" "),a("li",[t._v("kubectl / kubeadm / kubelet")])]),t._v(" "),a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"å¿«é€Ÿå®‰è£…"}},[a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åœ¨ master èŠ‚ç‚¹å’Œ worker èŠ‚ç‚¹éƒ½è¦æ‰§è¡Œ")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -sSL https://kuboard.cn/install-script/v1.16.1/install_kubelet.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v("\n\n")])])])]),t._v(" "),a("el-tab-pane",{attrs:{label:"æ‰‹åŠ¨å®‰è£…"}},[a("p",[t._v("æ‰‹åŠ¨æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼Œæ•ˆæœä¸å¿«é€Ÿå®‰è£…å®Œå…¨ç›¸åŒã€‚")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åœ¨ master èŠ‚ç‚¹å’Œ worker èŠ‚ç‚¹éƒ½è¦æ‰§è¡Œ")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å®‰è£… docker")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å‚è€ƒæ–‡æ¡£å¦‚ä¸‹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# https://docs.docker.com/install/linux/docker-ce/centos/ ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# https://docs.docker.com/install/linux/linux-postinstall/")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¸è½½æ—§ç‰ˆæœ¬")]),t._v("\nyum remove -y docker "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\ndocker-client "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\ndocker-client-latest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\ndocker-common "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\ndocker-latest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\ndocker-latest-logrotate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\ndocker-logrotate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\ndocker-selinux "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\ndocker-engine-selinux "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\ndocker-engine\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è®¾ç½® yum repository")]),t._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y yum-utils "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\ndevice-mapper-persistent-data "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\nlvm2\nyum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å®‰è£…å¹¶å¯åŠ¨ docker")]),t._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y docker-ce-18.09.7 docker-ce-cli-18.09.7 containerd.io\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" docker\nsystemctl start docker\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å®‰è£… nfs-utils")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¿…é¡»å…ˆå®‰è£… nfs-utils æ‰èƒ½æŒ‚è½½ nfs ç½‘ç»œå­˜å‚¨")]),t._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y nfs-utils\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å…³é—­ é˜²ç«å¢™")]),t._v("\nsystemctl stop firewalld\nsystemctl disable firewalld\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å…³é—­ SeLinux")]),t._v("\nsetenforce "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"s/SELINUX=enforcing/SELINUX=disabled/g"')]),t._v(" /etc/selinux/config\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å…³é—­ swap")]),t._v("\nswapoff -a\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yes")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" /etc/fstab /etc/fstab_bak\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /etc/fstab_bak "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" -v swap "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /etc/fstab\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä¿®æ”¹ /etc/sysctl.conf")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¦‚æœæœ‰é…ç½®ï¼Œåˆ™ä¿®æ”¹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"s#^net.ipv4.ip_forward.*#net.ipv4.ip_forward=1#g"')]),t._v("  /etc/sysctl.conf\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"s#^net.bridge.bridge-nf-call-ip6tables.*#net.bridge.bridge-nf-call-ip6tables=1#g"')]),t._v("  /etc/sysctl.conf\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"s#^net.bridge.bridge-nf-call-iptables.*#net.bridge.bridge-nf-call-iptables=1#g"')]),t._v("  /etc/sysctl.conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¯èƒ½æ²¡æœ‰ï¼Œè¿½åŠ ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"net.ipv4.ip_forward = 1"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /etc/sysctl.conf\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"net.bridge.bridge-nf-call-ip6tables = 1"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /etc/sysctl.conf\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"net.bridge.bridge-nf-call-iptables = 1"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /etc/sysctl.conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ‰§è¡Œå‘½ä»¤ä»¥åº”ç”¨")]),t._v("\nsysctl -p\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# é…ç½®K8Sçš„yumæº")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v("EOF "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /etc/yum.repos.d/kubernetes.repo\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kubernetes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Kubernetes\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("baseurl")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("enabled")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("gpgcheck")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("repo_gpgcheck")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("gpgkey")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg\n       http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nEOF\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¸è½½æ—§ç‰ˆæœ¬")]),t._v("\nyum remove -y kubelet kubeadm kubectl\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å®‰è£…kubeletã€kubeadmã€kubectl")]),t._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y kubelet-1.16.1 kubeadm-1.16.1 kubectl-1.16.1\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä¿®æ”¹docker Cgroup Driverä¸ºsystemd")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# # å°†/usr/lib/systemd/system/docker.serviceæ–‡ä»¶ä¸­çš„è¿™ä¸€è¡Œ ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# # ä¿®æ”¹ä¸º ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --exec-opt native.cgroupdriver=systemd")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¦‚æœä¸ä¿®æ”¹ï¼Œåœ¨æ·»åŠ  worker èŠ‚ç‚¹æ—¶å¯èƒ½ä¼šç¢°åˆ°å¦‚ä¸‹é”™è¯¯")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# [WARNING IsDockerSystemdCheck]: detected "cgroupfs" as the Docker cgroup driver. The recommended driver is "systemd". ')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Please follow the guide at https://kubernetes.io/docs/setup/cri/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"s#^ExecStart=/usr/bin/dockerd.*#ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --exec-opt native.cgroupdriver=systemd#g"')]),t._v(" /usr/lib/systemd/system/docker.service\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è®¾ç½® docker é•œåƒï¼Œæé«˜ docker é•œåƒä¸‹è½½é€Ÿåº¦å’Œç¨³å®šæ€§")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¦‚æœæ‚¨è®¿é—® https://hub.docker.io é€Ÿåº¦éå¸¸ç¨³å®šï¼Œäº¦å¯ä»¥è·³è¿‡è¿™ä¸ªæ­¥éª¤")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -sSL https://get.daocloud.io/daotools/set_mirror.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" -s http://f1361db2.m.daocloud.io\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# é‡å¯ dockerï¼Œå¹¶å¯åŠ¨ kubelet")]),t._v("\nsystemctl daemon-reload\nsystemctl restart docker\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" kubelet "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" systemctl start kubelet\n\ndocker version\n")])])]),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("å¦‚æœæ­¤æ—¶æ‰§è¡Œ "),a("code",[t._v("service status kubelet")]),t._v(" å‘½ä»¤ï¼Œå°†å¾—åˆ° kubelet å¯åŠ¨å¤±è´¥çš„é”™è¯¯æç¤ºï¼Œè¯·å¿½ç•¥æ­¤é”™è¯¯ï¼Œå› ä¸ºå¿…é¡»å®Œæˆåç»­æ­¥éª¤ä¸­ kubeadm init çš„æ“ä½œï¼Œkubelet æ‰èƒ½æ­£å¸¸å¯åŠ¨")])])])],1)],1)]),t._v(" "),a("h2",{attrs:{id:"åˆå§‹åŒ–-master-èŠ‚ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆå§‹åŒ–-master-èŠ‚ç‚¹","aria-hidden":"true"}},[t._v("#")]),t._v(" åˆå§‹åŒ– master èŠ‚ç‚¹")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("ul",[a("li",[t._v("ä»¥ root èº«ä»½åœ¨ demo-master-a-1 æœºå™¨ä¸Šæ‰§è¡Œ")]),t._v(" "),a("li",[t._v("åˆå§‹åŒ– master èŠ‚ç‚¹æ—¶ï¼Œå¦‚æœå› ä¸ºä¸­é—´æŸäº›æ­¥éª¤çš„é…ç½®å‡ºé”™ï¼Œæƒ³è¦é‡æ–°åˆå§‹åŒ– master èŠ‚ç‚¹ï¼Œè¯·å…ˆæ‰§è¡Œ "),a("code",[t._v("kubeadm reset")]),t._v(" æ“ä½œ")])])]),t._v(" "),a("div",{staticClass:"danger custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("å…³äºåˆå§‹åŒ–æ—¶ç”¨åˆ°çš„ç¯å¢ƒå˜é‡")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("APISERVER_NAME")]),t._v(" ä¸èƒ½æ˜¯ master çš„ hostname")]),t._v(" "),a("li",[a("strong",[t._v("APISERVER_NAME")]),t._v(" å¿…é¡»å…¨ä¸ºå°å†™å­—æ¯ã€æ•°å­—ã€å°æ•°ç‚¹ï¼Œä¸èƒ½åŒ…å«å‡å·")]),t._v(" "),a("li",[a("strong",[t._v("POD_SUBNET")]),t._v(" æ‰€ä½¿ç”¨çš„ç½‘æ®µä¸èƒ½ä¸ "),a("em",[a("strong",[t._v("masterèŠ‚ç‚¹/workerèŠ‚ç‚¹")])]),t._v(" æ‰€åœ¨çš„ç½‘æ®µé‡å ã€‚è¯¥å­—æ®µçš„å–å€¼ä¸ºä¸€ä¸ª "),a("a",{attrs:{href:"/glossary/cidr.html",target:"_blank"}},[t._v("CIDR")]),t._v(" å€¼ï¼Œå¦‚æœæ‚¨å¯¹ CIDR è¿™ä¸ªæ¦‚å¿µè¿˜ä¸ç†Ÿæ‚‰ï¼Œè¯·ä»ç„¶æ‰§è¡Œ export POD_SUBNET=10.100.0.1/16 å‘½ä»¤ï¼Œä¸åšä¿®æ”¹")])])]),t._v(" "),a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"å¿«é€Ÿåˆå§‹åŒ–"}},[a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åªåœ¨ master èŠ‚ç‚¹æ‰§è¡Œ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ›¿æ¢ x.x.x.x ä¸º master èŠ‚ç‚¹å®é™… IPï¼ˆè¯·ä½¿ç”¨å†…ç½‘ IPï¼‰")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# export å‘½ä»¤åªåœ¨å½“å‰ shell ä¼šè¯ä¸­æœ‰æ•ˆï¼Œå¼€å¯æ–°çš„ shell çª—å£åï¼Œå¦‚æœè¦ç»§ç»­å®‰è£…è¿‡ç¨‹ï¼Œè¯·é‡æ–°æ‰§è¡Œæ­¤å¤„çš„ export å‘½ä»¤")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("MASTER_IP")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("x.x.x.x\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ›¿æ¢ apiserver.demo ä¸º æ‚¨æƒ³è¦çš„ dnsName")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("APISERVER_NAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("apiserver.demo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Kubernetes å®¹å™¨ç»„æ‰€åœ¨çš„ç½‘æ®µï¼Œè¯¥ç½‘æ®µå®‰è£…å®Œæˆåï¼Œç”± kubernetes åˆ›å»ºï¼Œäº‹å…ˆå¹¶ä¸å­˜åœ¨äºæ‚¨çš„ç‰©ç†ç½‘ç»œä¸­")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("POD_SUBNET")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.100")]),t._v(".0.1/16\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${MASTER_IP}")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${APISERVER_NAME}")]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /etc/hosts\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -sSL https://kuboard.cn/install-script/v1.16.1/init_master.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v("\n")])])])]),t._v(" "),a("el-tab-pane",{attrs:{label:"æ‰‹å·¥åˆå§‹åŒ–"}},[a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åªåœ¨ master èŠ‚ç‚¹æ‰§è¡Œ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ›¿æ¢ x.x.x.x ä¸º master èŠ‚ç‚¹å®é™… IPï¼ˆè¯·ä½¿ç”¨å†…ç½‘ IPï¼‰")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# export å‘½ä»¤åªåœ¨å½“å‰ shell ä¼šè¯ä¸­æœ‰æ•ˆï¼Œå¼€å¯æ–°çš„ shell çª—å£åï¼Œå¦‚æœè¦ç»§ç»­å®‰è£…è¿‡ç¨‹ï¼Œè¯·é‡æ–°æ‰§è¡Œæ­¤å¤„çš„ export å‘½ä»¤")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("MASTER_IP")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("x.x.x.x\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ›¿æ¢ apiserver.demo ä¸º æ‚¨æƒ³è¦çš„ dnsName")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("APISERVER_NAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("apiserver.demo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Kubernetes å®¹å™¨ç»„æ‰€åœ¨çš„ç½‘æ®µï¼Œè¯¥ç½‘æ®µå®‰è£…å®Œæˆåï¼Œç”± kubernetes åˆ›å»ºï¼Œäº‹å…ˆå¹¶ä¸å­˜åœ¨äºæ‚¨çš„ç‰©ç†ç½‘ç»œä¸­")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("POD_SUBNET")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.100")]),t._v(".0.1/16\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${MASTER_IP}")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${APISERVER_NAME}")]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /etc/hosts\n")])])]),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åªåœ¨ master èŠ‚ç‚¹æ‰§è¡Œ")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è„šæœ¬å‡ºé”™æ—¶ç»ˆæ­¢æ‰§è¡Œ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" -e\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æŸ¥çœ‹å®Œæ•´é…ç½®é€‰é¡¹ https://godoc.org/k8s.io/kubernetes/cmd/kubeadm/app/apis/kubeadm/v1beta2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -f ./kubeadm-config.yaml\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v("EOF "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ./kubeadm-config.yaml\napiVersion: kubeadm.k8s.io/v1beta2\nkind: ClusterConfiguration\nkubernetesVersion: v1.16.1\nimageRepository: registry.cn-hangzhou.aliyuncs.com/google_containers\ncontrolPlaneEndpoint: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${APISERVER_NAME}")]),t._v(':6443"')]),t._v("\nnetworking:\n  serviceSubnet: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10.96.0.0/16"')]),t._v("\n  podSubnet: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${POD_SUBNET}")]),t._v('"')]),t._v("\n  dnsDomain: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cluster.local"')]),t._v("\nEOF\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# kubeadm init")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ ¹æ®æ‚¨æœåŠ¡å™¨ç½‘é€Ÿçš„æƒ…å†µï¼Œæ‚¨éœ€è¦ç­‰å€™ 3 - 10 åˆ†é’Ÿ")]),t._v("\nkubeadm init --config"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("kubeadm-config.yaml --upload-certs\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# é…ç½® kubectl")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -rf /root/.kube/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /root/.kube/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" -i /etc/kubernetes/admin.conf /root/.kube/config\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å®‰è£… calico ç½‘ç»œæ’ä»¶")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å‚è€ƒæ–‡æ¡£ https://docs.projectcalico.org/v3.8/getting-started/kubernetes/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -f calico.yaml\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://docs.projectcalico.org/v3.8/manifests/calico.yaml\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"s#192\\.168\\.0\\.0/16#'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${POD_SUBNET}")]),t._v('#"')]),t._v(" calico.yaml\nkubectl apply -f calico.yaml\n")])])])])],1),t._v(" "),a("p",[a("strong",[t._v("æ£€æŸ¥ master åˆå§‹åŒ–ç»“æœ")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åªåœ¨ master èŠ‚ç‚¹æ‰§è¡Œ")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œç­‰å¾… 3-10 åˆ†é’Ÿï¼Œç›´åˆ°æ‰€æœ‰çš„å®¹å™¨ç»„å¤„äº Running çŠ¶æ€")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("watch")]),t._v(" kubectl get pod -n kube-system -o wide\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æŸ¥çœ‹ master èŠ‚ç‚¹åˆå§‹åŒ–ç»“æœ")]),t._v("\nkubectl get nodes -o wide\n")])])]),t._v(" "),a("h2",{attrs:{id:"åˆå§‹åŒ–-workerèŠ‚ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆå§‹åŒ–-workerèŠ‚ç‚¹","aria-hidden":"true"}},[t._v("#")]),t._v(" åˆå§‹åŒ– workerèŠ‚ç‚¹")]),t._v(" "),a("h3",{attrs:{id:"è·å¾—-joinå‘½ä»¤å‚æ•°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è·å¾—-joinå‘½ä»¤å‚æ•°","aria-hidden":"true"}},[t._v("#")]),t._v(" è·å¾— joinå‘½ä»¤å‚æ•°")]),t._v(" "),a("p",[a("strong",[t._v("åœ¨ master èŠ‚ç‚¹ä¸Šæ‰§è¡Œ")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åªåœ¨ master èŠ‚ç‚¹æ‰§è¡Œ")]),t._v("\nkubeadm token create --print-join-command\n")])])]),a("p",[t._v("å¯è·å–kubeadm join å‘½ä»¤åŠå‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤º")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# kubeadm token create å‘½ä»¤çš„è¾“å‡º")]),t._v("\nkubeadm "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),t._v(" apiserver.demo:6443 --token mpfjma.4vjjg8flqihor4vt     --discovery-token-ca-cert-hash sha256:6f7a8e40a810323672de5eee6f4d19aa2dbdb38411845a1bf5dd63485c43d303\n")])])]),a("h3",{attrs:{id:"åˆå§‹åŒ–worker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆå§‹åŒ–worker","aria-hidden":"true"}},[t._v("#")]),t._v(" åˆå§‹åŒ–worker")]),t._v(" "),a("p",[a("strong",[t._v("é’ˆå¯¹æ‰€æœ‰çš„ worker èŠ‚ç‚¹æ‰§è¡Œ")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åªåœ¨ worker èŠ‚ç‚¹æ‰§è¡Œ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ›¿æ¢ x.x.x.x ä¸º master èŠ‚ç‚¹å®é™… IPï¼ˆè¯·ä½¿ç”¨å†…ç½‘ IPï¼‰")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("MASTER_IP")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("x.x.x.x\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ›¿æ¢ apiserver.demo ä¸ºåˆå§‹åŒ– master èŠ‚ç‚¹æ—¶æ‰€ä½¿ç”¨çš„ APISERVER_NAME")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("APISERVER_NAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("apiserver.demo\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${MASTER_IP}")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${APISERVER_NAME}")]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /etc/hosts\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ›¿æ¢ä¸º master èŠ‚ç‚¹ä¸Š kubeadm token create å‘½ä»¤çš„è¾“å‡º")]),t._v("\nkubeadm "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),t._v(" apiserver.demo:6443 --token mpfjma.4vjjg8flqihor4vt     --discovery-token-ca-cert-hash sha256:6f7a8e40a810323672de5eee6f4d19aa2dbdb38411845a1bf5dd63485c43d303\n")])])]),a("h3",{attrs:{id:"æ£€æŸ¥åˆå§‹åŒ–ç»“æœ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ£€æŸ¥åˆå§‹åŒ–ç»“æœ","aria-hidden":"true"}},[t._v("#")]),t._v(" æ£€æŸ¥åˆå§‹åŒ–ç»“æœ")]),t._v(" "),a("p",[t._v("åœ¨ master èŠ‚ç‚¹ä¸Šæ‰§è¡Œ")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åªåœ¨ master èŠ‚ç‚¹æ‰§è¡Œ")]),t._v("\nkubectl get nodes -o wide\n")])])]),a("p",[t._v("è¾“å‡ºç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@demo-master-a-1 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# kubectl get nodes")]),t._v("\nNAME     STATUS   ROLES    AGE     VERSION\ndemo-master-a-1   Ready    master   5m3s    v1.16.1\ndemo-worker-a-1   Ready    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("   2m26s   v1.16.1\ndemo-worker-a-2   Ready    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("   3m56s   v1.16.1\n")])])]),a("h2",{attrs:{id:"ç§»é™¤-worker-èŠ‚ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç§»é™¤-worker-èŠ‚ç‚¹","aria-hidden":"true"}},[t._v("#")]),t._v(" ç§»é™¤ worker èŠ‚ç‚¹")]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ‚¨æ— éœ€ç§»é™¤ worker èŠ‚ç‚¹ï¼Œå¦‚æœæ·»åŠ åˆ°é›†ç¾¤å‡ºé”™ï¼Œæ‚¨å¯ä»¥ç§»é™¤ worker èŠ‚ç‚¹ï¼Œå†é‡æ–°å°è¯•æ·»åŠ ")])]),t._v(" "),a("p",[t._v("åœ¨å‡†å¤‡ç§»é™¤çš„ worker èŠ‚ç‚¹ä¸Šæ‰§è¡Œ")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åªåœ¨ worker èŠ‚ç‚¹æ‰§è¡Œ")]),t._v("\nkubeadm reset\n")])])]),a("p",[t._v("åœ¨ master èŠ‚ç‚¹ demo-master-a-1 ä¸Šæ‰§è¡Œ")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åªåœ¨ master èŠ‚ç‚¹æ‰§è¡Œ")]),t._v("\nkubectl delete node demo-worker-x-x\n")])])]),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("ul",[a("li",[t._v("å°† demo-worker-x-x æ›¿æ¢ä¸ºè¦ç§»é™¤çš„ worker èŠ‚ç‚¹çš„åå­—")]),t._v(" "),a("li",[t._v("worker èŠ‚ç‚¹çš„åå­—å¯ä»¥é€šè¿‡åœ¨èŠ‚ç‚¹ demo-master-a-1 ä¸Šæ‰§è¡Œ kubectl get nodes å‘½ä»¤è·å¾—")])])]),t._v(" "),a("h2",{attrs:{id:"å®‰è£…-ingress-controller"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…-ingress-controller","aria-hidden":"true"}},[t._v("#")]),t._v(" å®‰è£… Ingress Controller")]),t._v(" "),a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"å®‰è£…IngressController"}},[a("p",[a("strong",[t._v("åœ¨ master èŠ‚ç‚¹ä¸Šæ‰§è¡Œ")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åªåœ¨ master èŠ‚ç‚¹æ‰§è¡Œ")]),t._v("\nkubectl apply -f https://kuboard.cn/install-script/v1.16.1/nginx-ingress.yaml\n")])])])]),t._v(" "),a("el-tab-pane",{attrs:{label:"å¸è½½IngressController"}},[a("p",[a("strong",[t._v("åœ¨ master èŠ‚ç‚¹ä¸Šæ‰§è¡Œ")])]),t._v(" "),a("p",[t._v("åªåœ¨æ‚¨æƒ³é€‰æ‹©å…¶ä»– Ingress Controller çš„æƒ…å†µä¸‹å¸è½½")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åªåœ¨ master èŠ‚ç‚¹æ‰§è¡Œ")]),t._v("\nkubectl delete -f https://kuboard.cn/install-script/v1.16.1/nginx-ingress.yaml\n")])])])]),t._v(" "),a("el-tab-pane",{attrs:{label:"YAMLæ–‡ä»¶"}},[a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¦‚æœæ‰“ç®—ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œè¯·å‚è€ƒ https://github.com/nginxinc/kubernetes-ingress/blob/v1.5.5/docs/installation.md å¹¶æ ¹æ®æ‚¨è‡ªå·±çš„æƒ…å†µåšè¿›ä¸€æ­¥å®šåˆ¶")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Namespace\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ingress\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ServiceAccount\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ingress \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("namespace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ingress\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Secret\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" default"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("secret\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("namespace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ingress\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Opaque\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("tls.crt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUN2akNDQWFZQ0NRREFPRjl0THNhWFhEQU5CZ2txaGtpRzl3MEJBUXNGQURBaE1SOHdIUVlEVlFRRERCWk8KUjBsT1dFbHVaM0psYzNORGIyNTBjbTlzYkdWeU1CNFhEVEU0TURreE1qRTRNRE16TlZvWERUSXpNRGt4TVRFNApNRE16TlZvd0lURWZNQjBHQTFVRUF3d1dUa2RKVGxoSmJtZHlaWE56UTI5dWRISnZiR3hsY2pDQ0FTSXdEUVlKCktvWklodmNOQVFFQkJRQURnZ0VQQURDQ0FRb0NnZ0VCQUwvN2hIUEtFWGRMdjNyaUM3QlBrMTNpWkt5eTlyQ08KR2xZUXYyK2EzUDF0azIrS3YwVGF5aGRCbDRrcnNUcTZzZm8vWUk1Y2Vhbkw4WGM3U1pyQkVRYm9EN2REbWs1Qgo4eDZLS2xHWU5IWlg0Rm5UZ0VPaStlM2ptTFFxRlBSY1kzVnNPazFFeUZBL0JnWlJVbkNHZUtGeERSN0tQdGhyCmtqSXVuektURXUyaDU4Tlp0S21ScUJHdDEwcTNRYzhZT3ExM2FnbmovUWRjc0ZYYTJnMjB1K1lYZDdoZ3krZksKWk4vVUkxQUQ0YzZyM1lma1ZWUmVHd1lxQVp1WXN2V0RKbW1GNWRwdEMzN011cDBPRUxVTExSakZJOTZXNXIwSAo1TmdPc25NWFJNV1hYVlpiNWRxT3R0SmRtS3FhZ25TZ1JQQVpQN2MwQjFQU2FqYzZjNGZRVXpNQ0F3RUFBVEFOCkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQWpLb2tRdGRPcEsrTzhibWVPc3lySmdJSXJycVFVY2ZOUitjb0hZVUoKdGhrYnhITFMzR3VBTWI5dm15VExPY2xxeC9aYzJPblEwMEJCLzlTb0swcitFZ1U2UlVrRWtWcitTTFA3NTdUWgozZWI4dmdPdEduMS9ienM3bzNBaS9kclkrcUI5Q2k1S3lPc3FHTG1US2xFaUtOYkcyR1ZyTWxjS0ZYQU80YTY3Cklnc1hzYktNbTQwV1U3cG9mcGltU1ZmaXFSdkV5YmN3N0NYODF6cFErUyt1eHRYK2VBZ3V0NHh3VlI5d2IyVXYKelhuZk9HbWhWNThDd1dIQnNKa0kxNXhaa2VUWXdSN0diaEFMSkZUUkk3dkhvQXprTWIzbjAxQjQyWjNrN3RXNQpJUDFmTlpIOFUvOWxiUHNoT21FRFZkdjF5ZytVRVJxbStGSis2R0oxeFJGcGZnPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("tls.key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBdi91RWM4b1JkMHUvZXVJTHNFK1RYZUprckxMMnNJNGFWaEMvYjVyYy9XMlRiNHEvClJOcktGMEdYaVN1eE9ycXgrajlnamx4NXFjdnhkenRKbXNFUkJ1Z1B0ME9hVGtIekhvb3FVWmcwZGxmZ1dkT0EKUTZMNTdlT1l0Q29VOUZ4amRXdzZUVVRJVUQ4R0JsRlNjSVo0b1hFTkhzbysyR3VTTWk2Zk1wTVM3YUhudzFtMApxWkdvRWEzWFNyZEJ6eGc2clhkcUNlUDlCMXl3VmRyYURiUzc1aGQzdUdETDU4cGszOVFqVUFQaHpxdmRoK1JWClZGNGJCaW9CbTVpeTlZTW1hWVhsMm0wTGZzeTZuUTRRdFFzdEdNVWozcGJtdlFmazJBNnljeGRFeFpkZFZsdmwKMm82MjBsMllxcHFDZEtCRThCay90elFIVTlKcU56cHpoOUJUTXdJREFRQUJBb0lCQVFDZklHbXowOHhRVmorNwpLZnZJUXQwQ0YzR2MxNld6eDhVNml4MHg4Mm15d1kxUUNlL3BzWE9LZlRxT1h1SENyUlp5TnUvZ2IvUUQ4bUFOCmxOMjRZTWl0TWRJODg5TEZoTkp3QU5OODJDeTczckM5bzVvUDlkazAvYzRIbjAzSkVYNzZ5QjgzQm9rR1FvYksKMjhMNk0rdHUzUmFqNjd6Vmc2d2szaEhrU0pXSzBwV1YrSjdrUkRWYmhDYUZhNk5nMUZNRWxhTlozVDhhUUtyQgpDUDNDeEFTdjYxWTk5TEI4KzNXWVFIK3NYaTVGM01pYVNBZ1BkQUk3WEh1dXFET1lvMU5PL0JoSGt1aVg2QnRtCnorNTZud2pZMy8yUytSRmNBc3JMTnIwMDJZZi9oY0IraVlDNzVWYmcydVd6WTY3TWdOTGQ5VW9RU3BDRkYrVm4KM0cyUnhybnhBb0dCQU40U3M0ZVlPU2huMVpQQjdhTUZsY0k2RHR2S2ErTGZTTXFyY2pOZjJlSEpZNnhubmxKdgpGenpGL2RiVWVTbWxSekR0WkdlcXZXaHFISy9iTjIyeWJhOU1WMDlRQ0JFTk5jNmtWajJTVHpUWkJVbEx4QzYrCk93Z0wyZHhKendWelU0VC84ajdHalRUN05BZVpFS2FvRHFyRG5BYWkyaW5oZU1JVWZHRXFGKzJyQW9HQkFOMVAKK0tZL0lsS3RWRzRKSklQNzBjUis3RmpyeXJpY05iWCtQVzUvOXFHaWxnY2grZ3l4b25BWlBpd2NpeDN3QVpGdwpaZC96ZFB2aTBkWEppc1BSZjRMazg5b2pCUmpiRmRmc2l5UmJYbyt3TFU4NUhRU2NGMnN5aUFPaTVBRHdVU0FkCm45YWFweUNweEFkREtERHdObit3ZFhtaTZ0OHRpSFRkK3RoVDhkaVpBb0dCQUt6Wis1bG9OOTBtYlF4VVh5YUwKMjFSUm9tMGJjcndsTmVCaWNFSmlzaEhYa2xpSVVxZ3hSZklNM2hhUVRUcklKZENFaHFsV01aV0xPb2I2NTNyZgo3aFlMSXM1ZUtka3o0aFRVdnpldm9TMHVXcm9CV2xOVHlGanIrSWhKZnZUc0hpOGdsU3FkbXgySkJhZUFVWUNXCndNdlQ4NmNLclNyNkQrZG8wS05FZzFsL0FvR0FlMkFVdHVFbFNqLzBmRzgrV3hHc1RFV1JqclRNUzRSUjhRWXQKeXdjdFA4aDZxTGxKUTRCWGxQU05rMXZLTmtOUkxIb2pZT2pCQTViYjhibXNVU1BlV09NNENoaFJ4QnlHbmR2eAphYkJDRkFwY0IvbEg4d1R0alVZYlN5T294ZGt5OEp0ek90ajJhS0FiZHd6NlArWDZDODhjZmxYVFo5MWpYL3RMCjF3TmRKS2tDZ1lCbyt0UzB5TzJ2SWFmK2UwSkN5TGhzVDQ5cTN3Zis2QWVqWGx2WDJ1VnRYejN5QTZnbXo5aCsKcDNlK2JMRUxwb3B0WFhNdUFRR0xhUkcrYlNNcjR5dERYbE5ZSndUeThXczNKY3dlSTdqZVp2b0ZpbmNvVlVIMwphdmxoTUVCRGYxSjltSDB5cDBwWUNaS2ROdHNvZEZtQktzVEtQMjJhTmtsVVhCS3gyZzR6cFE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ConfigMap\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("namespace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ingress\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("server-names-hash-bucket-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1024"')]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ClusterRole\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" rbac.authorization.k8s.io/v1beta1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ingress\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("rules")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiGroups")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" services\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" endpoints\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("verbs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" get\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" list\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" watch\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiGroups")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" secrets\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("verbs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" get\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" list\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" watch\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiGroups")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" configmaps\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("verbs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" get\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" list\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" watch\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" update\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" create\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiGroups")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" pods\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("verbs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" list\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiGroups")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" events\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("verbs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" create\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" patch\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiGroups")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" extensions\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ingresses\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("verbs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" list\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" watch\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" get\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiGroups")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"extensions"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ingresses/status\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("verbs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" update\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiGroups")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" k8s.nginx.org\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" virtualservers\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" virtualserverroutes\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("verbs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" list\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" watch\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" get\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ClusterRoleBinding\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" rbac.authorization.k8s.io/v1beta1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ingress\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("subjects")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ServiceAccount\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ingress\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("namespace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ingress\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("roleRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ClusterRole\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ingress\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiGroup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" rbac.authorization.k8s.io\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" apps/v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" DaemonSet\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ingress\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("namespace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ingress\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("annotations")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("prometheus.io/scrape")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("prometheus.io/port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"9113"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("selector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("matchLabels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ingress\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ingress\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("serviceAccountName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ingress\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("containers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx/nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ingress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("1.5.5\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ingress\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" http\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("containerPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hostPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("containerPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hostPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" prometheus\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("containerPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9113")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" POD_NAMESPACE\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("valueFrom")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("fieldRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("fieldPath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" metadata.namespace\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" POD_NAME\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("valueFrom")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("fieldRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("fieldPath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" metadata.name\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("args")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("configmaps=$(POD_NAMESPACE)/nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("config\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("default"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("tls"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("secret=$(POD_NAMESPACE)/default"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("secret\n         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- -v=3 # Enables extensive logging. Useful for troubleshooting.")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- -report-ingress-status")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- -external-service=nginx-ingress")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- -enable-leader-election")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("enable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("prometheus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("metrics\n         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- -enable-custom-resources")]),t._v("\n")])])])])],1),t._v(" "),a("p",[a("strong",[t._v("é…ç½®åŸŸåè§£æ")])]),t._v(" "),a("p",[t._v("å°†åŸŸå *.demo.yourdomain.com è§£æåˆ° demo-worker-a-2 çš„ IP åœ°å€ z.z.z.z ï¼ˆä¹Ÿå¯ä»¥æ˜¯ demo-worker-a-1 çš„åœ°å€ y.y.y.yï¼‰")]),t._v(" "),a("p",[a("strong",[t._v("éªŒè¯é…ç½®")])]),t._v(" "),a("p",[t._v("åœ¨æµè§ˆå™¨è®¿é—® a.demo.yourdomain.comï¼Œå°†å¾—åˆ° 404 NotFound é”™è¯¯é¡µé¢")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("æç¤º")]),t._v(" "),a("p",[t._v("è®¸å¤šåˆå­¦è€…åœ¨å®‰è£… Ingress Controller æ—¶ä¼šç¢°åˆ°é—®é¢˜ï¼Œè¯·ä¸è¦ç°å¿ƒï¼Œå¯æš‚æ—¶è·³è¿‡ "),a("em",[a("strong",[t._v("å®‰è£… Ingress Controller")])]),t._v(" è¿™ä¸ªéƒ¨åˆ†ï¼Œç­‰æ‚¨å­¦å®Œ www.kuboard.cn ä¸Š "),a("router-link",{attrs:{to:"/learning/k8s-basics/kubernetes-basics.html"}},[t._v("Kubernetes å…¥é—¨")]),t._v(" ä»¥åŠ "),a("router-link",{attrs:{to:"/learning/k8s-intermediate/service/ingress.html"}},[t._v("é€šè¿‡äº’è”ç½‘è®¿é—®æ‚¨çš„åº”ç”¨ç¨‹åº")]),t._v(" è¿™ä¸¤éƒ¨åˆ†å†…å®¹åï¼Œå†æ¥å›é¡¾ Ingress Controller çš„å®‰è£…ã€‚")],1)]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("å¦‚æœæ‚¨æ‰“ç®—å°† Kubernetes ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œè¯·å‚è€ƒæ­¤æ–‡æ¡£ "),a("a",{attrs:{href:"https://github.com/nginxinc/kubernetes-ingress/blob/v1.5.3/docs/installation.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("Installing Ingress Controller"),a("OutboundLink")],1),t._v("ï¼Œå®Œå–„ Ingress çš„é…ç½®")])]),t._v(" "),a("h2",{attrs:{id:"ä¸‹ä¸€æ­¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‹ä¸€æ­¥","aria-hidden":"true"}},[t._v("#")]),t._v(" ä¸‹ä¸€æ­¥")]),t._v(" "),a("div",{staticClass:"danger custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("å…³äºé‡å¯")]),t._v(" "),a("p",[t._v("å·²ç»é»˜è®¤å¼€å¯äº† kubeletã€docker çš„å¼€æœºå¯åŠ¨ï¼Œä½†æ˜¯ä»ç„¶æœ‰ç½‘å‹åœ¨é‡å¯è™šæ‹Ÿæœºä¹‹åæŠ±æ€¨ kubernetes ä¸èƒ½æ­£å¸¸ä½¿ç”¨ã€‚è¿™ç§æƒ…å†µå¤§å¤šæ•°æ˜¯å› ä¸º "),a("strong",[t._v("é‡å¯åï¼Œä½ çš„å†…ç½‘IPåœ°å€å‘ç”Ÿäº†å˜åŒ–")])])]),t._v(" "),a("p",[t._v("ğŸ‰ ğŸ‰ ğŸ‰")]),t._v(" "),a("p",[t._v("æ‚¨å·²ç»å®Œæˆäº† Kubernetes é›†ç¾¤çš„å®‰è£…ï¼Œä¸‹ä¸€æ­¥è¯·ï¼š")]),t._v(" "),a("p",[a("router-link",{attrs:{to:"/install/install-dashboard.html"}},[t._v("å®‰è£… Kuboard - å¾®æœåŠ¡ç®¡ç†ç•Œé¢")])],1),t._v(" "),a("p",[t._v("å®‰è£… Kuboard ä¹‹å‰å…ˆ\n"),a("a",{attrs:{target:"_blank",href:"http://demo.kuboard.cn/#/dashboard?k8sToken="+t.$site.themeConfig.kuboardToken}},[t._v("\nåœ¨çº¿ä½“éªŒ Kuboard\n")])]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("ul",[a("li",[t._v("Kubernetes åˆå­¦è€…ï¼Œ"),a("router-link",{attrs:{to:"/learning/"}},[t._v("ç‚¹å‡»è¿™é‡Œè·å– Kubernetes å­¦ä¹ è·¯å¾„")])],1)])])],1)}),[],!1,null,null,null);s.default=r.exports}}]);