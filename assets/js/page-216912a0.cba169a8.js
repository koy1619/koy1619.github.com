(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{399:function(r,t,n){"use strict";n.r(t);var e=n(1),s=Object(e.a)({},(function(){var r=this,t=r.$createElement,n=r._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":r.$parent.slotKey}},[n("h1",{attrs:{id:"pi0w试玩-usb-ethernet-一根microusb线玩转树莓派zerow"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pi0w试玩-usb-ethernet-一根microusb线玩转树莓派zerow","aria-hidden":"true"}},[r._v("#")]),r._v(" PI0W试玩(USB/Ethernet)  一根microUSB线玩转树莓派zeroW")]),r._v(" "),n("p",[r._v("============")]),r._v(" "),n("p",[r._v("##双11买了台口香糖电脑")]),r._v(" "),n("p",[r._v("##准备：")]),r._v(" "),n("blockquote",[n("ul",[n("li",[r._v("PI0W板子")]),r._v(" "),n("li",[r._v("TF卡")]),r._v(" "),n("li",[r._v("TF读卡器")]),r._v(" "),n("li",[r._v("microUSB线")]),r._v(" "),n("li",[r._v("windows10笔记本")])])]),r._v(" "),n("p",[r._v("##开搞")]),r._v(" "),n("ol",[n("li",[n("p",[r._v("格式化TF卡   (windows自带磁盘管理即可格式化)")])]),r._v(" "),n("li",[n("p",[r._v("用"),n("strong",[r._v("win32diskimager")]),r._v("烧录"),n("strong",[r._v("2018-11-13-raspbian-stretch-lite.img")])])]),r._v(" "),n("li",[n("p",[r._v("配置"),n("strong",[r._v("boot")]),r._v("   ("),n("strong",[r._v("windows")]),r._v("下烧录完"),n("strong",[r._v("boot")]),r._v("分区会以"),n("strong",[r._v("FAT32")]),r._v("暴露出来)")])])]),r._v(" "),n("p",[r._v("用**Notepad++**编辑")]),r._v(" "),n("p",[n("strong",[r._v("config.txt")]),r._v("   末端加一行 "),n("code",[r._v("dtoverlay=dwc2")])]),r._v(" "),n("p",[n("strong",[r._v("cmdline.txt")]),r._v(" "),n("code",[r._v("rootwait")]),r._v("后面加"),n("code",[r._v("modules-load=dwc2,g_ether")]),n("strong",[r._v("注意空格")])]),r._v(" "),n("p",[r._v("新建空文本文件改名"),n("strong",[r._v("ssh")])]),r._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[n("p",[n("code",[r._v("microUSB线")]),r._v("插"),n("strong",[r._v("PI0W")]),r._v("的"),n("code",[r._v("usb口")]),r._v("和电脑连接起来")])]),r._v(" "),n("li",[n("p",[r._v("这时"),n("strong",[r._v("Win10")]),r._v("下设备会被识别为"),n("strong",[r._v("COM")]),r._v("设备,在设备管理器中更新该驱动程序")])])]),r._v(" "),n("p",[r._v("驱动程序下载地址")]),r._v(" "),n("p",[r._v("https://pan.baidu.com/s/18v-LLt7_gDIHKfJRoBbqvA")]),r._v(" "),n("ol",{attrs:{start:"6"}},[n("li",[r._v("安装完驱动即可被识别为名为"),n("strong",[r._v("USB Ethernet/RNDIS Gadget")]),r._v("的网卡")])]),r._v(" "),n("p",[r._v("网卡状态未识别的网络,ip为"),n("code",[r._v("169.254.71.246")]),r._v("类似")]),r._v(" "),n("p",[n("strong",[r._v("需要注意的是")])]),r._v(" "),n("p",[n("strong",[r._v("这个IP地址并不是树莓派地址,而是RNDIS网卡地址")])]),r._v(" "),n("p",[n("strong",[r._v("树莓派还有另一个地址,这个地址查不到又与网卡地址不同,所以需要用"),n("code",[r._v("raspberrypi.local")])])]),r._v(" "),n("p",[n("strong",[r._v("唯一的办法是通过安装Bonjour等软件来让电脑可以支持识别局域网的"),n("code",[r._v("raspberrypi.local")]),r._v("主机名")])]),r._v(" "),n("ol",{attrs:{start:"7"}},[n("li",[r._v("安装Bonjour")])]),r._v(" "),n("p",[r._v("https://pan.baidu.com/s/1WbcUCsI9kWao9zZBnglT3Q")]),r._v(" "),n("ol",{attrs:{start:"8"}},[n("li",[n("p",[r._v("ssh连接")]),r._v(" "),n("pre",[n("code",[r._v(" C:\\Users\\xiaolei.ma>ping raspberrypi.local\n 正在 Ping raspberrypi.local [f110::71f2:35fd:8g01:5623%65] 具有 32 字节的数据:\n 来自 f110::71f2:35fd:8g01:5623%65 的回复: 时间<1ms\n 来自 f110::71f2:35fd:8g01:5623%65 的回复: 时间<1ms\n")])])])]),r._v(" "),n("p",[n("strong",[r._v("ping")]),r._v("通之后用"),n("strong",[r._v("SecureCRT")]),r._v("或者"),n("strong",[r._v("putty")]),r._v("连接"),n("code",[r._v("raspberrypi.local")])]),r._v(" "),n("p",[r._v("账户"),n("strong",[r._v("pi")])]),r._v(" "),n("p",[r._v("密码"),n("strong",[r._v("raspberry")])]),r._v(" "),n("p",[r._v("如果有"),n("strong",[r._v("bash")]),r._v("则命令行连接"),n("code",[r._v("ssh pi@raspberrypi.local")])]),r._v(" "),n("ol",{attrs:{start:"9"}},[n("li",[r._v("设置")])]),r._v(" "),n("p",[n("code",[r._v("sudo raspi-config")]),r._v("设置"),n("strong",[r._v("wifi")]),r._v("相关")]),r._v(" "),n("p",[r._v("设置完成后"),n("code",[r._v("ifconfig")]),r._v("发现"),n("strong",[r._v("wlan0")]),r._v("通过"),n("strong",[r._v("DHCP")]),r._v("获取到"),n("strong",[r._v("IP")]),r._v(",以后即可通过"),n("strong",[r._v("IP")]),r._v("地址连接")]),r._v(" "),n("pre",[n("code",[r._v("    pi@raspberrypi:~ $ ifconfig\n    lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536\n            inet 127.0.0.1  netmask 255.0.0.0\n            inet6 ::1  prefixlen 128  scopeid 0x10<host>\n            loop  txqueuelen 1000  (Local Loopback)\n            RX packets 23  bytes 1848 (1.8 KiB)\n            RX errors 0  dropped 0  overruns 0  frame 0\n            TX packets 23  bytes 1848 (1.8 KiB)\n            TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n    \n    usb0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\n            inet 169.254.71.246  netmask 255.255.0.0  broadcast 169.254.255.255\n            inet6 f110::71f2:35fd:8g01:5623  prefixlen 64  scopeid 0x20<link>\n            ether 2g:6h:2g:33:11:11  txqueuelen 1000  (Ethernet)\n            RX packets 3164  bytes 436325 (426.0 KiB)\n            RX errors 0  dropped 11  overruns 0  frame 0\n            TX packets 1299  bytes 293238 (286.3 KiB)\n            TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n    \n    wlan0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\n            inet 10.10.3.55  netmask 255.255.255.0  broadcast 10.10.3.255\n            inet6 f3e0::7g7a:345f:bq27:65g6  prefixlen 64  scopeid 0x20<link>\n            ether 2g:12:12:12:11:11  txqueuelen 1000  (Ethernet)\n            RX packets 12997  bytes 1198100 (1.1 MiB)\n            RX errors 0  dropped 0  overruns 0  frame 0\n            TX packets 459  bytes 67142 (65.5 KiB)\n            TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n")])]),r._v(" "),n("p",[r._v("每次"),n("code",[r._v("sudo raspi-config")]),r._v("设置"),n("strong",[r._v("wifi")]),r._v("之后都会写入到这个配置当中"),n("code",[r._v("/etc/wpa_supplicant/wpa_supplicant.conf")])]),r._v(" "),n("p",[r._v("注意的是新增而不是覆盖写入")]),r._v(" "),n("p",[r._v("如果范围内同时有多个"),n("strong",[r._v("WiFi")]),r._v(",则可以手动更改配置文件设置优先级")]),r._v(" "),n("pre",[n("code",[r._v('    pi@raspberrypi:~ $ sudo cat /etc/wpa_supplicant/wpa_supplicant.conf \n    ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev\n    update_config=1\n    country=CN\n    \n    network={\n            ssid="mamama"\n            psk="XXX.com"\n            priority=5   //优先级 数字越大越优先\n    }\n    \n    network={\n            ssid="Tech"\n            psk="xxx.com"\n            priority=4   //优先级 数字越大越优先\n    }\n    pi@raspberrypi:~ $ \n')])]),r._v(" "),n("ol",{attrs:{start:"10"}},[n("li",[n("p",[r._v("更换源")]),r._v(" "),n("pre",[n("code",[r._v("pi@raspberrypi:~ $ sudo cat /etc/apt/sources.list\n#deb http://raspbian.raspberrypi.org/raspbian/ stretch main contrib non-free rpi\n# Uncomment line below then 'apt-get update' to enable 'apt-get source'\n#deb-src http://raspbian.raspberrypi.org/raspbian/ stretch main contrib non-free rpi\n\ndeb     http://mirrors.ustc.edu.cn/raspbian/raspbian/ stretch main contrib non-free rpi\ndeb-src http://mirrors.ustc.edu.cn/raspbian/raspbian/ stretch main contrib non-free rpi\n")])])]),r._v(" "),n("li",[n("p",[r._v("安装图形界面")]),r._v(" "),n("pre",[n("code",[r._v("pi@raspberrypi:~ $ cat install_X.sh \nsudo apt-get update -y\nsudo apt-get install --no-install-recommends xserver-xorg -y\nsudo apt-get install --no-install-recommends xinit -y\nsudo apt-get install raspberrypi-ui-mods -y\nsudo reboot\n")])])]),r._v(" "),n("li",[n("p",[r._v("安装VNC")])])]),r._v(" "),n("p",[r._v("按顺序安装，一定要按顺序安装")]),r._v(" "),n("pre",[n("code",[r._v("    sudo apt-get install tightvncserver\n    sudo apt-get install xrdp\n")])]),r._v(" "),n("ol",{attrs:{start:"13"}},[n("li",[r._v("windows--mstsc--pi0w_IP--Xorg")])]),r._v(" "),n("p",[r._v("##other")]),r._v(" "),n("p",[r._v("这期间一共研究了两天时间才搞定,其中翻阅各种资料论坛")]),r._v(" "),n("p",[r._v("搜索关键字")]),r._v(" "),n("p",[n("strong",[r._v("一根线玩树莓派zeroW")])]),r._v(" "),n("p",[n("strong",[r._v("树莓派zeroW开机")])]),r._v(" "),n("p",[r._v("因为不管提前配好"),n("strong",[r._v("wifi")]),r._v("还是配成网卡模式,通电都无法看到任何动静,找不到树莓派的IP,只是绿灯再闪")]),r._v(" "),n("p",[r._v("期间换过"),n("strong",[r._v("raspbian")]),r._v("历史版本,换过TF卡，尝试过各种操作")]),r._v(" "),n("p",[r._v("会不会是板子有问题呢,本来今天想着最后在研究一把,实在研究不出来就退货...")]),r._v(" "),n("p",[r._v("后来换了一根近期买的小米充电宝附赠的usb线,连到电脑显示新增硬件"),n("strong",[r._v("RNDIS/Ethernet Gadget")]),r._v(" 才有了上面这些操作...")]),r._v(" "),n("p",[n("strong",[r._v("尼玛原来是USB线的坑啊~~~")])]),r._v(" "),n("p",[r._v("##tip")]),r._v(" "),n("p",[r._v("在遇到问题有可能是TF卡有问题,也有可能是USB线,电源的问题,或者是系统不兼容问题")]),r._v(" "),n("p",[r._v("网上的资料有可能会解决你的问题,但不一定完全吻合!")]),r._v(" "),n("p",[r._v("还是得靠自己爬坑")]),r._v(" "),n("p",[r._v("##via")]),r._v(" "),n("p",[r._v("http://shumeipai.nxez.com/2018/02/20/raspberry-pi-zero-usb-ethernet-gadget-tutorial.html")]),r._v(" "),n("p",[r._v("https://www.baidu.com/s?ie=UTF-8&wd=%E4%B8%80%E6%A0%B9%E7%BA%BF%E7%8E%A9%E6%A0%91%E8%8E%93%E6%B4%BEzeroW")])])}),[],!1,null,null,null);t.default=s.exports}}]);