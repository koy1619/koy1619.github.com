(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{420:function(s,t,a){"use strict";a.r(t);var n=a(1),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"centos安装ossec"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos安装ossec","aria-hidden":"true"}},[s._v("#")]),s._v(" centos安装ossec")]),s._v(" "),a("h2",{attrs:{id:"fyi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fyi","aria-hidden":"true"}},[s._v("#")]),s._v(" fyi")]),s._v(" "),a("p",[s._v("OSSEC是一款由Trend Micro（趋势科技）开发的开源的基于主机的入侵检测系统，可以简称为HIDS。它具备日志分析，文件完整性检查，策略监控，rootkit检测，实时报警以及联动响应等功能。它支持多种操作系统：Linux、Windows、MacOS、Solaris、HP-UX、AIX。属于企业安全之利器。")]),s._v(" "),a("p",[s._v("详细的介绍和文档可以参考官网网站：")]),s._v(" "),a("p",[s._v("http://www.ossec.net/")]),s._v(" "),a("h2",{attrs:{id:"服务端安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务端安装","aria-hidden":"true"}},[s._v("#")]),s._v(" 服务端安装")]),s._v(" "),a("pre",[a("code",[s._v("计算机名：ossec-server.com\nIP地址：10.10.16.1\n")])]),s._v(" "),a("h3",{attrs:{id:"server端支持环境安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server端支持环境安装","aria-hidden":"true"}},[s._v("#")]),s._v(" server端支持环境安装")]),s._v(" "),a("p",[s._v("首先我们安装需要用到的关联库和软件，由于我们最终是需要把日志导入到MySQL中进行分析，以及需要通过web程序对报警结果进行展示，同时需要把本机当做SMTP，所以需要在本机安装MySQL、Apache和sendmail服务。在当前的终端中执行如下命令：")]),s._v(" "),a("pre",[a("code",[s._v("[root@ossec-server ~]# yum install wget gcc make mysql mysql-server mysql-devel httpd php php-mysql sendmail\n启动httpd、mysql、sendmail服务\n[root@ossec-server ~]# /etc/init.d/httpd start\n[root@ossec-server ~]# /etc/init.d/mysqld start\n[root@ossec-server ~]# /etc/init.d/sendmail start\n")])]),s._v(" "),a("p",[s._v("下面创建数据库以方便我们下面的安装配置，连接到本机的MySQL，然后执行如下命令：")]),s._v(" "),a("pre",[a("code",[s._v("[root@ossec-server ~]# mysql -uroot -p\nmysql> create database ossec;\nmysql> grant INSERT,SELECT,UPDATE,CREATE,DELETE,EXECUTE on ossec.* to ossec@localhost;\nmysql> set password for ossec@localhost=PASSWORD('ossec');\nmysql> flush privileges;\nmysql> exit\n")])]),s._v(" "),a("h3",{attrs:{id:"安装ossec服务端程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装ossec服务端程序","aria-hidden":"true"}},[s._v("#")]),s._v(" 安装OSSEC服务端程序")]),s._v(" "),a("p",[s._v("首先通过官网的链接下载当前的最新稳定版本 2.7 的服务端包，同时解压。")]),s._v(" "),a("pre",[a("code",[s._v("[root@ossec-server ~]# wget http://www.ossec.net/files/ossec-hids-2.7.1.tar.gz\n[root@ossec-server ~]# tar zxf ossec-hids-2.7.1.tar.gz\n[root@ossec-server ~]# cd ossec-hids-2.7.1\n")])]),s._v(" "),a("p",[s._v("为了使OSSEC支持MySQL，需要在安装前执行make setdb命令，如下")]),s._v(" "),a("pre",[a("code",[s._v("[root@ossec-server ossec-hids-2.7.1]# cd src; make setdb; cd ..\n")])]),s._v(" "),a("p",[s._v("看到如下的信息说明可以正常支持MySQL：")]),s._v(" "),a("pre",[a("code",[s._v("Info: Compiled with MySQL support.\n")])]),s._v(" "),a("p",[s._v("下面进入安装步骤，执行install.sh脚本，同时按照下面的信息进行填写：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ossec-server ossec-hids-2.7.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sh install.sh ")]),s._v("\nwhich: no "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin:/usr/local/mysql/bin:/usr/local/jdk1.7.0_09//bin:/root/bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n  ** Para instalação em português, escolha "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("br"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** 要使用中文进行安装, 请选择 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("cn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Fur eine deutsche Installation wohlen Sie "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("de"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Για εγκατάσταση στα Ελληνικά, επιλέξτε "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** For installation "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" English, choose "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("en"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Para instalar en Español , eliga "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("es"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Pour une installation en français, choisissez "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("fr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  ** A Magyar nyelvű telepítéshez válassza "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("hu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Per l'installazione "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" Italiano, scegli "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("it"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** 日本語でインストールします．選択して下さい．"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("jp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Voor installatie "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" het Nederlands, kies "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("nl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Aby instalować w języku Polskim, wybierz "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("pl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Для инструкций по установке на русском ,введите "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ru"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Za instalaciju na srpskom, izaberi "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Türkçe kurulum için seçin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("tr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("en/br/cn/de/el/es/fr/hu/it/jp/nl/pl/ru/sr/tr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("en"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": cn\nwhich: no "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin:/usr/local/mysql/bin:/usr/local/jdk1.7.0_09//bin:/root/bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n OSSEC HIDS v2.7.1 安装脚本 - http://www.ossec.net\n \n 您将开始 OSSEC HIDS 的安装.\n 请确认在您的机器上已经正确安装了 C 编译器.\n 如果您有任何疑问或建议,请给 dcid@ossec.net "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("或 daniel.cid@gmail.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 发邮件.\n \n  - 系统类型: Linux ossec-server.com "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.6")]),s._v(".32-431.el6.x86_64\n  - 用户: root\n  - 主机: ossec-server.com\n\n\n  -- 按 ENTER 继续或 Ctrl-C 退出. --\n\n\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("- 您希望哪一种安装 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("server, agent, "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" or "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("? server\n\n  - 选择了 Server 类型的安装.\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("- 正在初始化安装环境.\n\n - 请选择 OSSEC HIDS 的安装路径 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("/usr/local/ossec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": /usr/local/ossec\n\n    - OSSEC HIDS 将安装在  /usr/local/ossec "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("- 正在配置 OSSEC HIDS.\n\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v("- 您希望收到e-mail告警吗? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y/n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": y\n   - 请输入您的 e-mail 地址? koy1619@linux.com\n   - 请输入您的 SMTP 服务器IP或主机名 ? "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\n\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),s._v("- 您希望运行系统完整性检测模块吗? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y/n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": y\n\n   - 系统完整性检测模块将被部署.\n\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.3")]),s._v("- 您希望运行 rootkit检测吗? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y/n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": y\n\n   - rootkit检测将被部署.\n       \n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.4")]),s._v("- 关联响应允许您在分析已接收事件的基础上执行一个\n       已定义的命令.\n       例如,你可以阻止某个IP地址的访问或禁止某个用户的访问权限.\n       更多的信息,您可以访问:\n       http://www.ossec.net/en/manual.html"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#active-response")]),s._v("\n   - 您希望开启联动"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("active response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("功能吗? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y/n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": y\n\n\n     - 关联响应已开启\n\n   - 默认情况下, 我们开启了主机拒绝和防火墙拒绝两种响应.\n     第一种情况将添加一个主机到 /etc/hosts.deny.\n     第二种情况将在iptables"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("linux"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("或ipfilter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Solaris,\n     FreeBSD 或 NetBSD）中拒绝该主机的访问.\n   - 该功能可以用以阻止 SSHD 暴力攻击, 端口扫描和其他\n     一些形式的攻击. 同样你也可以将他们添加到其他地方,\n     例如将他们添加为 snort 的事件.\n\n   - 您希望开启防火墙联动"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("firewall-drop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("功能吗? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y/n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": y\n\n     - 防火墙联动"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("firewall-drop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("当事件级别 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" 时被启动\n\n   - 联动功能默认的白名单是:\n      - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".16.1\n\n   - 您希望添加更多的IP到白名单吗? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y/n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": n\n\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.5")]),s._v("- 您希望接收远程机器syslog吗 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("port "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("514")]),s._v(" udp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y/n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": y\n\n   - 远程机器syslog将被接收.\n\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),s._v("- 设置配置文件以分析一下日志:\n    -- /var/log/messages\n    -- /var/log/secure\n    -- /var/log/maillog\n\n                            \n -如果你希望监控其他文件, 只需要在配置文件ossec.conf中\n  添加新的一项. \n  任何关于配置的疑问您都可以在 http://www.ossec.net 找到答案.\n\n\n  --- 按 ENTER 以继续 ---\n")])])]),a("p",[s._v("最后敲回车即可安装到"),a("code",[s._v("/usr/local/ossec")]),s._v(",注意上面的"),a("code",[s._v("email")]),s._v("地址和"),a("code",[s._v("白名单")]),s._v("后面可以在配置文件中修改。")]),s._v(" "),a("h3",{attrs:{id:"ossec服务端配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ossec服务端配置","aria-hidden":"true"}},[s._v("#")]),s._v(" OSSEC服务端配置")]),s._v(" "),a("p",[s._v("上面只是安装好了OSSEC服务端，下面则是为了配置服务端，使其工作正常。执行下面命令启用数据库支持：")]),s._v(" "),a("pre",[a("code",[s._v("[root@ossec-server ossec-hids-2.7.1]# /usr/local/ossec/bin/ossec-control enable database\n")])]),s._v(" "),a("p",[s._v("然后导入MySQL表结构到MySQL中：")]),s._v(" "),a("pre",[a("code",[s._v("[root@ossec-server ossec-hids-2.7.1]# mysql -uossec -p ossec < src/os_dbd/mysql.schema\n")])]),s._v(" "),a("p",[s._v("修改配置文件的权限，否则会启动服务失败：")]),s._v(" "),a("pre",[a("code",[s._v("[root@ossec-server ossec-hids-2.7.1]# chmod u+w /usr/local/ossec/etc/ossec.conf\n")])]),s._v(" "),a("p",[s._v("然后编辑ossec.conf文件，在ossec_config中添加MySQL配置：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("database_output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("hostname"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("localhost"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/hostname"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("username"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("ossec"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/username"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("password"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("ossec"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/password"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("database"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("ossec"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/database"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("type"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/type"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/database_output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("p",[s._v("由于我们在前面的安装过程中支持接受远程机器的syslog，所以我们还需要对ossec.conf文件中的syslog部分进行配置，修改ossec.conf文件，按照下面的内容进行修改，把我们网段可以全添加进去：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("remote"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("connection"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("syslog"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/connection"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("allowed-ips"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".16.0/2"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("4")]),s._v("<")]),s._v("/allowed-ips"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/remote"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("p",[s._v("然后添加我们需要监控的客户机的白名单IP地址")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("global"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("white_list"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0."),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v("<")]),s._v("/white_list"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("white_list"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("^localhost.localdomain$"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/white_list"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("white_list"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".16."),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v("<")]),s._v("/white_list"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("white_list"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".16."),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("3")]),s._v("<")]),s._v("/white_list"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("white_list"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".16."),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("4")]),s._v("<")]),s._v("/white_list"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/global"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("p",[s._v("如果有多个邮件的收件人需要添加")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("global"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("email_notification"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("yes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/email_notification"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("email_to"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("koy@linux.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/email_to"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("email_to"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("koy2@linux.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/email_to"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("email_to"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("koy3@linux.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/email_to"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("smtp_server"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0."),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v("<")]),s._v("/smtp_server"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("email_from"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("ossecm@ossec-server.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/email_from"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/global"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("p",[s._v("在服务器上添加客户端，执行如下命令，按照提示进行输：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ossec-server ossec-hids-2.7.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/ossec/bin/manage_agents ")]),s._v("\n\n\n****************************************\n* OSSEC HIDS v2.7.1 Agent manager.     *\n* The following options are available: *\n****************************************\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("A"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("dd an agent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("A"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("E"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("xtract key "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" an agent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("E"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("L"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("ist already added agents "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("L"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("R"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("emove an agent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("R"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("uit.\nChoose your action: A,E,L,R or Q: A\n\n- Adding a new agent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("use "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\q'")]),s._v(" to "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" to the main menu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n  Please provide the following:\n   * A name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the new agent: client1\n   * The IP Address of the new agent: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".16.2\n   * An ID "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the new agent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("001"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": 001\nAgent information:\n   ID:001\n   Name:client1\n   IP Address:10.10.16.2\n\nConfirm adding it?"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y/n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": y\nAgent added.\n\n\n****************************************\n* OSSEC HIDS v2.7.1 Agent manager.     *\n* The following options are available: *\n****************************************\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("A"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("dd an agent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("A"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("E"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("xtract key "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" an agent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("E"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("L"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("ist already added agents "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("L"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("R"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("emove an agent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("R"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("uit.\nChoose your action: A,E,L,R or Q: \n")])])]),a("p",[s._v("添加完客户端之后，还需要生成密钥，选择E选项")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("****************************************\n* OSSEC HIDS v2.7.1 Agent manager.     *\n* The following options are available: *\n****************************************\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("A"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("dd an agent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("A"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("E"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("xtract key "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" an agent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("E"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("L"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("ist already added agents "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("L"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("R"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("emove an agent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("R"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("uit.\nChoose your action: A,E,L,R or Q: e\n\nAvailable agents: \n   ID: 001, Name: client1, IP: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".16.2\nProvide the ID of the agent to extract the key "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("or "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\q'")]),s._v(" to quit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": 001\n\nAgent key information "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'001'")]),s._v(" is: \nMDAyIGNsaWVudDEgMTAuMTAuMTYuMiA2MDQ3NTc4NDBmZWE4ZTkyZDcxYjk3ZGY4NmNmMzIyY2Y0OGIwNjRlMTE2NDM5Yzk2Y2JkMGEyMDllNTVmMGQ4\n\n** Press ENTER to "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" to the main menu.\n")])])]),a("p",[s._v("到现在就可以启动我们的ossec服务端了。")]),s._v(" "),a("pre",[a("code",[s._v("[root@ossec-server ossec-hids-2.7.1]# /usr/local/ossec/bin/ossec-control start\n")])]),s._v(" "),a("p",[s._v("查看监听端口")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ossec-server analogi-master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# netstat -antup|grep ossec")]),s._v("\ntcp        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:43425             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:3306              ESTABLISHED "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1841")]),s._v("/ossec-dbd      \nudp        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:514                 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*                               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1865")]),s._v("/ossec-remoted  \nudp        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:1514                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*                               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1866")]),s._v("/ossec-remoted  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ossec-server analogi-master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])])]),a("p",[s._v("如果开启iptables，则需要开放这2个UDP端口到client")]),s._v(" "),a("h2",{attrs:{id:"客户端安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#客户端安装","aria-hidden":"true"}},[s._v("#")]),s._v(" 客户端安装")]),s._v(" "),a("pre",[a("code",[s._v("计算机名：client1.com\nIP地址：10.10.16.2\n")])]),s._v(" "),a("p",[s._v("客户端也需要安装gcc编译器")]),s._v(" "),a("pre",[a("code",[s._v("[root@client1 ~]# yum -y install gcc\n")])]),s._v(" "),a("p",[s._v("安装ossec客户端程序")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@client1 ossec-hids-2.7.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sh install.sh ")]),s._v("\n\n  ** Para instalação em português, escolha "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("br"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** 要使用中文进行安装, 请选择 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("cn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Fur eine deutsche Installation wohlen Sie "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("de"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Για εγκατάσταση στα Ελληνικά, επιλέξτε "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** For installation "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" English, choose "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("en"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Para instalar en Español , eliga "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("es"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Pour une installation en français, choisissez "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("fr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  ** A Magyar nyelvű telepítéshez válassza "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("hu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Per l'installazione "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" Italiano, scegli "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("it"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** 日本語でインストールします．選択して下さい．"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("jp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Voor installatie "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" het Nederlands, kies "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("nl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Aby instalować w języku Polskim, wybierz "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("pl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Для инструкций по установке на русском ,введите "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ru"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Za instalaciju na srpskom, izaberi "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  ** Türkçe kurulum için seçin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("tr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("en/br/cn/de/el/es/fr/hu/it/jp/nl/pl/ru/sr/tr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("en"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": cn\n OSSEC HIDS v2.7.1 安装脚本 - http://www.ossec.net\n \n 您将开始 OSSEC HIDS 的安装.\n 请确认在您的机器上已经正确安装了 C 编译器.\n 如果您有任何疑问或建议,请给 dcid@ossec.net "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("或 daniel.cid@gmail.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 发邮件.\n \n  - 系统类型: Linux client1.com "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.6")]),s._v(".32-279.el6.x86_64\n  - 用户: root\n  - 主机: client1.com\n\n\n  -- 按 ENTER 继续或 Ctrl-C 退出. --\n\n\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("- 您希望哪一种安装 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("server, agent, "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" or "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("? agent\n\n  - 选择了 Agent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 类型的安装.\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("- 正在初始化安装环境.\n\n - 请选择 OSSEC HIDS 的安装路径 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("/usr/local/ossec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": /usr/local/ossec\n\n    - OSSEC HIDS 将安装在  /usr/local/ossec "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("- 正在配置 OSSEC HIDS.\n\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v("- 请输入 OSSEC HIDS 服务器的IP地址或主机名: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".16.1\n\n   - 添加服务器IP  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".16.1\n\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),s._v("- 您希望运行系统完整性检测模块吗? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y/n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": y\n\n   - 系统完整性检测模块将被部署.\n\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.3")]),s._v("- 您希望运行 rootkit检测吗? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y/n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": y\n\n   - rootkit检测将被部署.\n\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.4")]),s._v(" - 您希望开启联动"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("active response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("功能吗? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y/n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": y\n\n\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.5")]),s._v("- 设置配置文件以分析一下日志:\n    -- /var/log/messages\n    -- /var/log/secure\n    -- /var/log/maillog\n\n                            \n -如果你希望监控其他文件, 只需要在配置文件ossec.conf中\n  添加新的一项. \n  任何关于配置的疑问您都可以在 http://www.ossec.net 找到答案.\n\n\n  --- 按 ENTER 以继续 ---\n")])])]),a("p",[s._v("敲玩回车即可完成安装，然后需要添加一下密钥，把刚才在server端生成的密钥复制下来")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@client1 ossec-hids-2.7.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/ossec/bin/manage_agents")]),s._v("\n\n\n****************************************\n* OSSEC HIDS v2.7.1 Agent manager.     *\n* The following options are available: *\n****************************************\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("mport key from the server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("uit.\nChoose your action: I or Q: i\n\n* Provide the Key generated by the server.\n* The best approach is to "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cut")]),s._v(" and "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("paste")]),s._v(" it.\n*** OBS: Do not include spaces or new lines.\n\nPaste it here "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("or "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\q'")]),s._v(" to quit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": MDAyIGNsaWVudDEgMTAuMTAuMTYuMiA2MDQ3NTc4NDBmZWE4ZTkyZDcxYjk3ZGY4NmNmMzIyY2Y0OGIwNjRlMTE2NDM5Yzk2Y2JkMGEyMDllNTVmMGQ4\n\nAgent information:\n   ID:001\n   Name:client1\n   IP Address:10.10.16.2\n\nConfirm adding it?"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y/n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": y\nAdded.\n** Press ENTER to "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" to the main menu.\n\n\n\n****************************************\n* OSSEC HIDS v2.7.1 Agent manager.     *\n* The following options are available: *\n****************************************\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("mport key from the server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("uit.\nChoose your action: I or Q: \n")])])]),a("p",[s._v("这样即可完成client端安装，启动ossec服务")]),s._v(" "),a("pre",[a("code",[s._v("[root@client1 ossec-hids-2.7.1]# /usr/local/ossec/bin/ossec-control start \n")])]),s._v(" "),a("p",[s._v("之后就可以收到服务器log更新的邮件了，但是这样子还不够，我们需要通过更加直观的方式统一集中式的查看服务器的log情况，这就需要安装web-gui")]),s._v(" "),a("h2",{attrs:{id:"web-gui安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#web-gui安装","aria-hidden":"true"}},[s._v("#")]),s._v(" WEB-GUI安装")]),s._v(" "),a("p",[s._v("ossec官方提供的ossec-wui    https://github.com/ossec/ossec-wui\ngithub开源analogi-master   https://github.com/ECSC/analogi/archive/master.zip")]),s._v(" "),a("h3",{attrs:{id:"ossec官方ossec-wui-安装方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ossec官方ossec-wui-安装方法","aria-hidden":"true"}},[s._v("#")]),s._v(" ossec官方ossec-wui 安装方法")]),s._v(" "),a("p",[s._v("下载解压之后放到apache的web目录，并加apache用户权限")]),s._v(" "),a("pre",[a("code",[s._v("[root@ossec-server ossec-wui-master]# chown -R apache.apache /usr/local/httpd/htdocs/ossec-wui-master/\n")])]),s._v(" "),a("p",[s._v("执行安装脚本")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ossec-server ossec-wui-master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sh setup.sh ")]),s._v("\nSetting up ossec ui"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n\nUsername: root\nNew password: \nRe-type new password: \nAdding password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user root\nEnter your web server user name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e.g. apache, www, nobody, www-data, "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\napache\nsed：-e 表达式 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1，字符 22：未终止的“s”命令")]),s._v("\nEnter your OSSEC "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" directory path "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e.g. /var/ossec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n/usr/local/ossec\nYou must restart your web server after this setup is done.\n\nSetup completed successfuly.\n")])])]),a("p",[s._v("修改配置文件中的ossec_dir路径")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ossec-server ossec-wui-master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /usr/local/httpd/htdocs/ossec-wui-master/ossec_conf.php ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("?php\n\n/* OSSEC Configuration "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the UI. Make sure to "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v("\n * right ossec_dir "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" here. If your server does not\n * have much memory available, reduce the max_alerts\n * variable to something smaller.\n */\n\n/* Ossec directory */\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ossec_dir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/ossec"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n/* Maximum alerts per page */\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ossec_max_alerts_per_page")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n/* Default search values */\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ossec_search_level")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ossec_search_time")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14400")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n/* Default refreshing "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" */\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ossec_refresh_time")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n?"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("p",[s._v("修改"),a("code",[s._v("php.ini")])]),s._v(" "),a("pre",[a("code",[s._v(" max_execution_time = 180\n max_input_time = 180\n memory_limit = 30M\n")])]),s._v(" "),a("p",[s._v("重启web服务即可查看web界面")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2019/10/18/iynbcPlEYCM6LvI.jpg",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"github开源analogi安装方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github开源analogi安装方法","aria-hidden":"true"}},[s._v("#")]),s._v(" github开源analogi安装方法")]),s._v(" "),a("p",[s._v("下载并解压放到web目录，只需要修改一下mysql的连接池就ok")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ossec-server analogi-master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mv db_ossec.php.new db_ossec.php")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ossec-server analogi-master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim db_ossec.php")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("?php\n/*\n * Copyright "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" Andy "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Rimmer'")]),s._v(" Shepherd "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("andrew.shepherd@ecsc.co.uk"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ECSC Ltd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n * This program is "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v(" software"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" Distributed under the terms of the GNU GPL v3.\n */\n\ndefine "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DB_USER_O'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ossec'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ndefine "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DB_PASSWORD_O'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ossec'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ndefine "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DB_HOST_O'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ndefine "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DB_NAME_O'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ossec'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$db_ossec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" mysql_connect "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("DB_HOST_O, DB_USER_O, DB_PASSWORD_O"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" OR die "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Could not connect to SQL : '")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" mysql_error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"<br/>Click <a href='' onclick='document.cookie="),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("ossecdbjs=;expires=Thu, 01 Jan 1970 00:00:00 GMT"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("' >HERE</a> to s\nelect your main OSSEC DB\"")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nmysql_select_db "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("DB_NAME_O, "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$db_ossec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" OR die "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Could not select the database : '")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" mysql_error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"<br/>Click <a href='' onclick='document.cookie="),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("ossecdbjs=;expires=Thu, 01 Jan 1970 00:00:00 GMT"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("' >HERE</a> to select your main OSSE\nC DB\"")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n?"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("p",[s._v("web预览\n"),a("img",{attrs:{src:"https://i.loli.net/2019/10/18/pTiXC9eU2NwlqFz.jpg",alt:"请输入图片描述"}})]),s._v(" "),a("h2",{attrs:{id:"faq："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#faq：","aria-hidden":"true"}},[s._v("#")]),s._v(" FAQ：")]),s._v(" "),a("p",[s._v("发现无数据或者是看不到客户端，请查看"),a("code",[s._v("iptables")]),s._v("是否开放"),a("code",[s._v("udp")]),s._v("的"),a("code",[s._v("514")]),s._v("和"),a("code",[s._v("1514")]),s._v("端口并查看是否监听")]),s._v(" "),a("p",[s._v("web查看显示的时间不正确，可修改"),a("code",[s._v("php.ini")]),s._v("的date.timezone = Asia/Shanghai即可")]),s._v(" "),a("p",[s._v("sendmail邮件发不出，可修改查看主机名是否规范,需要检查以下地方,修改完毕重启sendmail即可")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ossec-server analogi-master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/hosts")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\n::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 ossec-server.com\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".16.1 ossec-server.com\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ossec-server analogi-master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/sysconfig/network")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NETWORKING")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOSTNAME")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ossec-server.com\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ossec-server analogi-master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hostname")]),s._v("\nossec-server.com\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);