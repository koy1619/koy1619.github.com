(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{452:function(t,s,n){"use strict";n.r(s);var a=n(1),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"startssl免费ssl证书-nginx搭建https"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#startssl免费ssl证书-nginx搭建https","aria-hidden":"true"}},[t._v("#")]),t._v(" Startssl免费SSL证书+Nginx搭建https")]),t._v(" "),n("p",[t._v("看到好多小伙伴们都使用了HTTPS\n所以为了更好的提高国内用户的访问体验（装13。。）在下也试试看")]),t._v(" "),n("p",[t._v("#必备条件")]),t._v(" "),n("blockquote",[n("p",[t._v("你要有个域名!!!\n你要有台server!\n你要有备案号!!!\n你要有备案号!!!\n你要有备案号!!!")])]),t._v(" "),n("p",[t._v("以上ok！那么下面我们就开搞！！")]),t._v(" "),n("p",[t._v("#注册StartSSL账号")]),t._v(" "),n("p",[t._v("需要注意注册成功之后需要保存登陆证书并双击导入到系统；\n然后登陆选择Authenticate进行登陆，需使用IE或者Microsoft Edge浏览器，由于会弹出证书允许提示，所以chrome无法加载证书\n"),n("img",{attrs:{src:"http://r6.loli.io/Bzq2Yn.png",alt:""}})]),t._v(" "),n("p",[t._v("#申请免费StartSSL证书")]),t._v(" "),n("p",[t._v("登陆后进入 Validations Wizard，验证你要添加 ssl 支持的域名\n"),n("img",{attrs:{src:"http://r5.loli.io/INB7jm.png",alt:""}}),t._v(" "),n("img",{attrs:{src:"http://r6.loli.io/Fruy6b.png",alt:""}}),t._v(" "),n("img",{attrs:{src:"http://r.loli.io/nuqMba.png",alt:""}}),t._v("\n按照提示添加OK！")]),t._v(" "),n("p",[t._v("进入 Certificates Wizard，并选择 Web Servers SSL/TLS Certificates\n"),n("img",{attrs:{src:"http://r.loli.io/yiQvEb.png",alt:""}}),t._v(" "),n("img",{attrs:{src:"http://r6.loli.io/n2qe22.png",alt:""}}),t._v("\n这里需要注意可以使用官方提供的"),n("code",[t._v("StartComTool.exe")]),t._v("生成CSR\n也可以使用"),n("code",[t._v("openssl")]),t._v("命令生成CSR")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@3-225 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# openssl req -newkey rsa:2048 -keyout linux48.key -out linux48.csr                 ")]),t._v("\nGenerating a "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2048")]),t._v(" bit RSA private key\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("+++\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("+++\nwriting new private key to "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'linux48.key'")]),t._v("\nEnter PEM pass phrase:\nVerifying - Enter PEM pass phrase:\n-----\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.'")]),t._v(", the field will be left blank.\n-----\nCountry Name "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" letter code"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("XX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":CN\nState or Province Name "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("full name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":ShangHai\nLocality Name "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eg, city"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Default City"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":ShangHai\nOrganization Name "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eg, company"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Default Company Ltd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":linux48.com\nOrganizational Unit Name "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eg, section"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":linux48.com\nCommon Name "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eg, your name or your server"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s hostname) []:*.linux48.com\nEmail Address []:admin@linux48.com\n\nPlease enter the following '")]),t._v("extra' attributes\nto be sent with your certificate request\nA challenge password "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":\nAn optional company name "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@3-225 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#cat linux48.csr  ##复制粘贴到Certificate Signing Request (CSR):")]),t._v("\n")])])]),n("p",[t._v("点击"),n("strong",[t._v("here")]),t._v("下载证书\n"),n("img",{attrs:{src:"http://r5.loli.io/fy2EFb.png",alt:""}}),t._v(" "),n("img",{attrs:{src:"http://r6.loli.io/uYvyey.png",alt:""}})]),t._v(" "),n("p",[t._v("#SSL证书的上传和nginx配置")]),t._v(" "),n("p",[t._v("把此crt文件重命名linux48.crt\n"),n("img",{attrs:{src:"http://r6.loli.io/VvEbie.png",alt:""}})]),t._v(" "),n("p",[t._v("还有刚才"),n("code",[t._v("openssl")]),t._v("命令生成的key\n"),n("img",{attrs:{src:"http://r.loli.io/EBNr2u.png",alt:""}})]),t._v(" "),n("p",[t._v("以上两个文件上传到web服务器；并重启nginx")]),t._v(" "),n("p",[t._v("需要注意的是启动nginx会提示输入PEM的密码，就是之前"),n("code",[t._v("openssl")]),t._v("生成的时候指定的密码")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@iZ62phtamqlZ vhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# /usr/local/nginx/sbin/nginx")]),t._v("\nEnter PEM pass phrase:\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@iZ62phtamqlZ vhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ")]),t._v("\n")])])]),n("p",[t._v("以下为nginx配置")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@iZ62phtamqlZ vhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cat linux48.com.conf ")]),t._v("\nlog_format  linux48.com  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$remote_addr")]),t._v(" - "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$remote_user")]),t._v(" ["),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$time_local")]),t._v('] "'),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),t._v("\" '")]),t._v("\n             "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$status")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$body_bytes_sent")]),t._v(' "'),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$http_referer")]),t._v("\" '")]),t._v("\n             "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\""),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$http_user_agent")]),t._v('" '),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$http_x_forwarded_for")]),t._v("'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\nserver\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                listen       "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                server_name linux48.com www.linux48.com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                index index.html index.htm index.php default.html default.htm default.php"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                root  /home/wwwroot/linux48.com/public"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n    ssl                  on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_certificate      /home/wwwroot/linux48.crt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_certificate_key  /home/wwwroot/linux48.key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_session_timeout  5m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_protocols SSLv2 SSLv3 TLSv1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_ciphers ALL:"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("ADH:"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_prefer_server_ciphers on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n                location ~ .*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gif"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("jpg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("jpeg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("png"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("bmp"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("swf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$\n                        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                                expires      30d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n                location ~ .*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("js"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("css"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("?$\n                        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                                expires      12h"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n                access_log  /home/wwwlogs/access.log  linux48.com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                error_page "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" /404.html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n\nserver\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                listen       "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                server_name linux48.com www.linux48.com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                rewrite ^"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(".*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" https://linux48.com"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v(" permanent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@iZ62phtamqlZ vhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ")]),t._v("\n")])])]),n("p",[n("strong",[t._v("请注意： 免费SSL证书仅适合于个人网站或非电子商务网站，不显示单位名称，仅起到加密传输信息的作用，并不能证明网站的真实身份。")])])])}),[],!1,null,null,null);s.default=e.exports}}]);