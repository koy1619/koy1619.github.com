(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{372:function(e,n,t){"use strict";t.r(n);var r=t(1),a=Object(r.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"树莓派python监控get脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#树莓派python监控get脚本","aria-hidden":"true"}},[e._v("#")]),e._v(" 树莓派python监控get脚本")]),e._v(" "),t("p",[e._v("================")]),e._v(" "),t("p",[e._v("树莓派内置了一个传感器你可以用来获取树莓派的CPU和GPU温度。")]),e._v(" "),t("p",[e._v("具体参数如下")]),e._v(" "),t("pre",[t("code",[e._v("pi@raspberrypi ~ $ cat /sys/class/thermal/thermal_zone0/temp\n38470\npi@raspberrypi ~ $ vcgencmd measure_temp\ntemp=38.5'C\n")])]),e._v(" "),t("p",[e._v("根据这2个参数写一个python脚本可以在终端打印小派当前硬件的使用情况以及cpu和gpu温度的python脚本，后面可以设置计划任务，打点显示！比xively监控参数略多！")]),e._v(" "),t("p",[e._v("这对于保护你的设备非常有用，举个例子：你可以在树莓派温度过高的时候关掉它或者在温度过热的时候报警。")]),e._v(" "),t("pre",[t("code",[e._v("import os\nimport commands\n\n#vcgencmd measure_temp\n#cat /sys/class/thermal/thermal_zone0/temp\n\n\n# Return CPU temperature as a character string                                      \ndef getCPUtemperature():\n    res = os.popen('vcgencmd measure_temp').readline()\n    return(res.replace(\"temp=\",\"\").replace(\"'C\\n\",\"\"))\n\n# Return GPU temperature as a character string\ndef get_gpu_temp():\n    gpu_temp = commands.getoutput( '/opt/vc/bin/vcgencmd measure_temp' ).replace( 'temp=', '' ).replace( '\\'C', '' )\n    return  float(gpu_temp)\n    # Uncomment the next line if you want the temp in Fahrenheit\n    # return float(1.8* gpu_temp)+32\n\n\n# Return RAM information (unit=kb) in a list                                       \n# Index 0: total RAM                                                               \n# Index 1: used RAM                                                                 \n# Index 2: free RAM                                                                 \ndef getRAMinfo():\n    p = os.popen('free')\n    i = 0\n    while 1:\n        i = i + 1\n        line = p.readline()\n        if i==2:\n            return(line.split()[1:4])\n\n# Return % of CPU used by user as a character string                                \ndef getCPUuse():\n    return(str(os.popen(\"top -n1 | awk '/Cpu\\(s\\):/ {print $2}'\").readline().strip(\\\n)))\n\n# Return information about disk space as a list (unit included)                     \n# Index 0: total disk space                                                         \n# Index 1: used disk space                                                         \n# Index 2: remaining disk space                                                     \n# Index 3: percentage of disk used                                                  \ndef getDiskSpace():\n    p = os.popen(\"df -h /\")\n    i = 0\n    while 1:\n        i = i +1\n        line = p.readline()\n        if i==2:\n            return(line.split()[1:5])\n\n\n# CPU informatiom\nCPU_temp = getCPUtemperature()\nCPU_usage = getCPUuse()\n\n# RAM information\n# Output is in kb, here I convert it in Mb for readability\nRAM_stats = getRAMinfo()\nRAM_total = round(int(RAM_stats[0]) / 1000,1)\nRAM_used = round(int(RAM_stats[1]) / 1000,1)\nRAM_free = round(int(RAM_stats[2]) / 1000,1)\n\n# Disk information\nDISK_stats = getDiskSpace()\nDISK_total = DISK_stats[0]\nDISK_used = DISK_stats[1]\nDISK_perc = DISK_stats[3]\n\nif __name__ == '__main__':\n  print('')\n  print('CPU Temperature = '+CPU_temp) , \"C\"\n  print('CPU Use = '+CPU_usage)\n  print \"GPU Temperature = \", str(get_gpu_temp()), \"C\"\n  print('')\n  print('RAM Total = '+str(RAM_total)+' MB')\n  print('RAM Used = '+str(RAM_used)+' MB')\n  print('RAM Free = '+str(RAM_free)+' MB')\n  print('')  \n  print('DISK Total Space = '+str(DISK_total)+'B')\n  print('DISK Used Space = '+str(DISK_used)+'B')\n  print('DISK Used Percentage = '+str(DISK_perc))\n")])]),e._v(" "),t("p",[e._v("执行效果")]),e._v(" "),t("pre",[t("code",[e._v("pi@raspberrypi ~ $ python /home/pi/sysdata/get.py\n\nCPU Temperature = 34.5 C\nCPU Use = 1.5\nGPU Temperature =  34.5 C\n\nRAM Total = 448.0 MB\nRAM Used = 383.0 MB\nRAM Free = 64.0 MB\n\nDISK Total Space = 7.2GB\nDISK Used Space = 2.1GB\nDISK Used Percentage = 31%\n")])])])}),[],!1,null,null,null);n.default=a.exports}}]);