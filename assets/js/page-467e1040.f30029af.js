(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{376:function(s,e,a){"use strict";a.r(e);var t=a(2),n=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("为了安装"),a("a",{attrs:{href:"https://kubesphere.io/docs/v2.0/zh-CN/installation/install-on-k8s/#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C",target:"_blank",rel:"noopener noreferrer"}},[s._v("KubeSphere"),a("OutboundLink")],1),s._v("必须先安装Helm，所以大概安装研究了一下")]),s._v(" "),a("p",[a("strong",[s._v("Helm简介")])]),s._v(" "),a("p",[s._v("很多人都使用过"),a("code",[s._v("Ubuntu")]),s._v("下的"),a("code",[s._v("ap-get")]),s._v("或者"),a("code",[s._v("CentOS")]),s._v("下的"),a("code",[s._v("yum")]),s._v(", 这两者都是"),a("code",[s._v("Linux")]),s._v("系统下的包管理工具。采用"),a("code",[s._v("apt-get/yum")]),s._v(",应用开发者可以管理应用包之间的依赖关系，发布应用；用户则可以以简单的方式查找、安装、升级、卸载应用程序。")]),s._v(" "),a("p",[s._v("我们可以将"),a("code",[s._v("Helm")]),s._v("看作"),a("code",[s._v("Kubernetes")]),s._v("下的"),a("code",[s._v("apt-get/yum")]),s._v("。"),a("code",[s._v("Helm")]),s._v("是"),a("code",[s._v("Deis")]),s._v(" (https://deis.com/) 开发的一个用于"),a("code",[s._v("kubernetes")]),s._v("的包管理器。每个包称为一个"),a("code",[s._v("Chart")]),s._v("，一个"),a("code",[s._v("Chart")]),s._v("是一个目录（一般情况下会将目录进行打包压缩，形成"),a("code",[s._v("name-version.tgz")]),s._v("格式的单一文件，方便传输和存储）。")]),s._v(" "),a("p",[s._v("对于应用发布者而言，可以通过"),a("code",[s._v("Helm")]),s._v("打包应用，管理应用依赖关系，管理应用版本并发布应用到软件仓库。")]),s._v(" "),a("p",[s._v("对于使用者而言，使用Helm后不用需要了解"),a("code",[s._v("Kubernetes")]),s._v("的"),a("code",[s._v("Yaml")]),s._v("语法并编写应用部署文件，可以通过"),a("code",[s._v("Helm")]),s._v("下载并在"),a("code",[s._v("kubernetes")]),s._v("上安装需要的应用。")]),s._v(" "),a("p",[s._v("除此以外，"),a("code",[s._v("Helm")]),s._v("还提供了"),a("code",[s._v("kubernetes")]),s._v("上的软件部署，删除，升级，回滚应用的强大功能。")]),s._v(" "),a("p",[a("code",[s._v("Helm")]),s._v("由客户端"),a("code",[s._v("helm")]),s._v("命令行工具和服务端"),a("code",[s._v("tiller")]),s._v("组成")]),s._v(" "),a("p",[a("strong",[s._v("安装helm")])]),s._v(" "),a("p",[s._v("下载"),a("code",[s._v("helm")]),s._v("命令行工具到"),a("code",[s._v("master")]),s._v("的"),a("code",[s._v("/usr/local/bin")]),s._v("下(如果有多个master，则只需要在其中一台"),a("code",[s._v("master")]),s._v("节点安装就行）")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://get.helm.sh/helm-v2.16.0-linux-amd64.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf helm-v2.16.0-linux-amd64.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" linux-amd64/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -rf helm tiller /usr/bin/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -rf helm tiller /usr/local/bin/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("strong",[s._v("使用helm部署tiller")])]),s._v(" "),a("ol",[a("li",[s._v("创建"),a("code",[s._v("tiller")]),s._v("使用的"),a("code",[s._v("service account")])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" EOF "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" helm-rbac.yaml\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: tiller\n  namespace: kube-system\n---\napiVersion: rbac.authorization.k8s.io/v1beta1\nkind: ClusterRoleBinding\nmetadata:\n  name: tiller\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: cluster-admin\nsubjects:\n  - kind: ServiceAccount\n    name: tiller\n    namespace: kube-system\nEOF\n\n\nkubectl apply -f helm-rbac.yaml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("部署tiller")])]),s._v(" "),a("p",[s._v("首先"),a("code",[s._v("master")]),s._v("和"),a("code",[s._v("node")]),s._v("都必须安装"),a("code",[s._v("socat")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" socat -y\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("安装"),a("code",[s._v("tiller")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("helm init --service-account tiller --skip-refresh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("由于 "),a("code",[s._v("Helm")]),s._v(" 默认会去 "),a("code",[s._v("kubernetes-charts.storage.googleapis.com")]),s._v("拉取镜像，如果你当前执行的机器不能访问该域名的话可以使用以下命令来安装：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("helm init --service-account tiller --upgrade -i registry.cn-hangzhou.aliyuncs.com/google_containers/tiller:v2.16.0  --stable-repo-url https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("code",[s._v("tiller")]),s._v("默认被部署在"),a("code",[s._v("k8s")]),s._v("集群中的"),a("code",[s._v("kube-system")]),s._v("这个"),a("code",[s._v("namespace")]),s._v("下：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pod -n kube-system -l app=helm")]),s._v("\nNAME                             READY   STATUS    RESTARTS   AGE\ntiller-deploy-54484dbdff-78rz8   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          22h\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("code",[s._v("helm")]),s._v("查看")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# helm version")]),s._v("\nClient: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("version.Version"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("SemVer:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v2.16.0"')]),s._v(", GitCommit:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"e13bc94621d4ef666270cfbe734aaabf342a49bb"')]),s._v(", GitTreeState:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clean"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nServer: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("version.Version"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("SemVer:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v2.16.0"')]),s._v(", GitCommit:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"e13bc94621d4ef666270cfbe734aaabf342a49bb"')]),s._v(", GitTreeState:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clean"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# helm list")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("strong",[s._v("异常修复")])]),s._v(" "),a("p",[s._v("如果刚开始就采用谷歌镜像安装了")]),s._v(" "),a("p",[s._v("提示"),a("code",[s._v("tiller pod")]),s._v("无法找到")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# helm version")]),s._v("\nClient: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("version.Version"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("SemVer:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v2.16.0"')]),s._v(", GitCommit:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"e13bc94621d4ef666270cfbe734aaabf342a49bb"')]),s._v(", GitTreeState:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clean"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nError: could not "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" a ready tiller pod\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("下载不到"),a("code",[s._v("tiller")]),s._v("镜像")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl describe pod tiller-deploy-7bf78cdbf7-nclnr -n kube-system")]),s._v("\n。。。。。。。\nEvents:\n  Type     Reason     Age                   From               Message\n  ----     ------     ----                  ----               -------\n  Normal   Pulling    29m "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x4 over 32m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("     kubelet, slaver1   Pulling image "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gcr.io/kubernetes-helm/tiller:v2.14.1"')]),s._v("\n  Warning  Failed     29m "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x4 over 31m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("     kubelet, slaver1   Failed to pull image "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gcr.io/kubernetes-helm/tiller:v2.14.1"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" rpc error: code "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Unknown desc "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Error response from daemon: Get https://gcr.io/v2/: net/http: request canceled "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" waiting "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" connection "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Client.Timeout exceeded "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" awaiting headers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  Warning  Failed     29m "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x4 over 31m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("     kubelet, slaver1   Error: ErrImagePull\n  Normal   BackOff    29m "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x6 over 31m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("     kubelet, slaver1   Back-off pulling image "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gcr.io/kubernetes-helm/tiller:v2.14.1"')]),s._v("\n  Normal   Scheduled  28m                   default-scheduler  Successfully assigned kube-system/tiller-deploy-7bf78cdbf7-nclnr to slaver1\n  Warning  Failed     6m58s "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x97 over 31m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  kubelet, slaver1   Error: ImagePullBackOff\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("解决：")]),s._v(" "),a("p",[s._v("删除配置，卸载，重新使用阿里源安装")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf /root/.helm\n\nhelm reset -f\n\nhelm init --service-account tiller --upgrade -i registry.cn-hangzhou.aliyuncs.com/google_containers/tiller:v2.16.0  --stable-repo-url https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts \n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods -n kube-system -o wide |grep tiller")]),s._v("\ntiller-deploy-54484dbdff-78rz8          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          22h   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.254")]),s._v(".50.4    k8s-node-2   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# helm version")]),s._v("\nClient: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("version.Version"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("SemVer:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v2.16.0"')]),s._v(", GitCommit:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"e13bc94621d4ef666270cfbe734aaabf342a49bb"')]),s._v(", GitTreeState:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clean"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nServer: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("version.Version"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("SemVer:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v2.16.0"')]),s._v(", GitCommit:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"e13bc94621d4ef666270cfbe734aaabf342a49bb"')]),s._v(", GitTreeState:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clean"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[a("strong",[s._v("helm 使用")])]),s._v(" "),a("p",[s._v("更换仓库")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 先移除原先的仓库")]),s._v("\nhelm repo remove stable\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加新的仓库地址")]),s._v("\nhelm repo "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" stable https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新仓库")]),s._v("\nhelm repo update\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("阿里云的仓库 版本更新太慢，换成微软的")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("helm repo "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" stable http://mirror.azure.cn/kubernetes/charts/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查看仓库：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@master /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# helm repo list")]),s._v("\nNAME      URL                                      \nstable    http://mirror.azure.cn/kubernetes/charts/\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("     http://127.0.0.1:8879/charts\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("查看在存储库中可用的所有 Helm charts：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("helm search\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("卸载helm")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("\nhelm reset \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("参考")]),s._v(" "),a("p",[s._v("https://segmentfault.com/a/1190000020348840")]),s._v(" "),a("p",[s._v("https://www.cnblogs.com/shansongxian/p/9870508.html")])])}),[],!1,null,null,null);e.default=n.exports}}]);