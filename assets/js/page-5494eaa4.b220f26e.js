(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{390:function(s,a,t){s.exports=t.p+"assets/img/zJHjranPQKmOy5L.13b021d5.png"},391:function(s,a,t){s.exports=t.p+"assets/img/1ywpnNWzhEfZSXD.b4c868f3.png"},559:function(s,a,t){"use strict";t.r(a);var r=t(2),e=Object(r.a)({},(function(){var s=this,a=s.$createElement,r=s._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("div",{staticClass:"custom-block tip"},[r("p",[s._v("KVM 是指基于 Linux 内核的虚拟机（Kernel-based Virtual Machine）。 2006 年 10 月，由以色列的Qumranet 组织开发的一种新的“虚拟机”实现方案。 2007 年 2 月发布的 Linux 2.6.20 内核第一次包含了 KVM 。增加 KVM 到 Linux 内核是 Linux 发展的一个重要里程碑，这也是第一个整合到 Linux 主线内核的虚拟化技术。")])]),s._v(" "),r("h1",{attrs:{id:"redhat-centos系统kvm虚拟机安装过程详解"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#redhat-centos系统kvm虚拟机安装过程详解"}},[s._v("#")]),s._v(" Redhat/CentOS系统KVM虚拟机安装过程详解")]),s._v(" "),r("h2",{attrs:{id:"什么是-kvm"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#什么是-kvm"}},[s._v("#")]),s._v(" 什么是 KVM ?")]),s._v(" "),r("p",[s._v("KVM 是指基于 Linux 内核的虚拟机（Kernel-based Virtual Machine）。 2006 年 10 月，由以色列的Qumranet 组织开发的一种新的“虚拟机”实现方案。 2007 年 2 月发布的 Linux 2.6.20 内核第一次包含了 KVM 。增加 KVM 到 Linux 内核是 Linux 发展的一个重要里程碑，这也是第一个整合到 Linux 主线内核的虚拟化技术。")]),s._v(" "),r("p",[s._v("KVM 在标准的 Linux 内核中增加了虚拟技术，从而我们可以通过优化的内核来使用虚拟技术。在 KVM 模型中，每一个虚拟机都是一个由 Linux 调度程序管理的标准进程，你可以在用户空间启动客户机操作系统。一个普通的 Linux 进程有两种运行模式：内核和用户。 KVM 增加了第三种模式：客户模式（有自己的内核和用户模式）。")]),s._v(" "),r("p",[s._v("一个典型的 KVM 安装包括以下部件：")]),s._v(" "),r("blockquote",[r("ul",[r("li",[s._v("一个管理虚拟硬件的设备驱动，这个驱动通过一个字符设备 /dev/kvm 导出它的功能。通过 /dev/kvm每一个客户机拥有其自身的地址空间，这个地址空间与内核的地址空间相分离或与任何一个正运行着的客户机相分离。")]),s._v(" "),r("li",[s._v("一个模拟硬件的用户空间部件，它是一个稍微改动过的 QEMU 进程。从客户机操作系统执行 I/O 会拥有QEMU 。 QEMU 是一个平台虚拟化方案，它允许整个 PC 环境（包括磁盘、显示卡（图形卡）、网络设备）的虚拟化。任何客户机操作系统所发出的 I/O 请求都被拦截，并被路由到用户模式用以被 QEMU 过程模拟仿真。")])])]),s._v(" "),r("h2",{attrs:{id:"centos上安装kvm功能模块步骤"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#centos上安装kvm功能模块步骤"}},[s._v("#")]),s._v(" CentOS上安装KVM功能模块步骤")]),s._v(" "),r("p",[r("strong",[s._v("1.KVM 需要有 CPU 的支持（Intel VT 或 AMD SVM），在安装 KVM 之前检查一下 CPU 是否提供了虚拟技术的支持。")])]),s._v(" "),r("blockquote",[r("ul",[r("li",[s._v("基于 Intel 处理器的系统，运行"),r("code",[s._v("grep vmx /proc/cpuinfo")]),s._v("查找 CPU flags 是否包括 vmx 关键词")]),s._v(" "),r("li",[s._v("基于 AMD 处理器的系统，运行"),r("code",[s._v("grep svm /proc/cpuinfo")]),s._v("查找 CPU flags 是否包括 svm 关键词")]),s._v(" "),r("li",[s._v("检查BIOS，确保BIOS里开启VT选项:")])])]),s._v(" "),r("p",[s._v("注 : 一些厂商禁止了机器 BIOS 中的 VT 选项 , 这种方式下 VT 不能被重新打开。**")]),s._v(" "),r("p",[s._v("注意：/proc/cpuinfo 仅从 Linux 2.6.15(Intel) 和 Linux 2.6.16(AMD) 开始显示虚拟化方面的信息。请使用 uname -r 命令查询您的内核版本。如有疑问，请联系硬件厂商。")]),s._v(" "),r("p",[r("strong",[s._v("2.iptables设置")])]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost qemu"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /bin/iptables.sh ")]),s._v("\nmodprobe ip_conntrack_ftp\niptables -F\niptables -A INPUT -i lo -j ACCEPT\niptables -A OUTPUT -o em1  -j ACCEPT\niptables -A INPUT -s "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 -d "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 -j ACCEPT\n/sbin/iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#for ping:")]),s._v("\niptables -A INPUT -p icmp --icmp-type echo-reply -j ACCEPT\niptables -A INPUT -p icmp --icmp-type echo-request -j ACCEPT\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#for kvm")]),s._v("\niptables -I FORWARD -m physdev --physdev-is-bridged -j ACCEPT\n\niptables -A INPUT -p tcp -j REJECT --reject-with tcp-reset\niptables -A INPUT -j DROP\niptables -A FORWARD -j DROP\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost qemu"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br")])]),r("p",[r("strong",[s._v("3.安装与启动")])]),s._v(" "),r("pre",[r("code",[s._v("yum install kvm libvirt python-virtinst qemu-kvm virt-viewer bridge-utils\n\n/etc/init.d/libvirtd start\n")])]),s._v(" "),r("p",[r("strong",[s._v("4.建立虚拟机")])]),s._v(" "),r("p",[s._v("划分硬盘")]),s._v(" "),r("pre",[r("code",[s._v("qemu-img create -f qcow2 -o preallocation=metadata /home/kvm/centos65-x64-mysql.qcow2 200G\n")])]),s._v(" "),r("p",[s._v("安装KVM，下面是两种常见的网络连接方式，默认是default，适用于不同需求的网络环境，后面配置KVM中会详细说明。")]),s._v(" "),r("p",[s._v("bridge网络模式")]),s._v(" "),r("pre",[r("code",[s._v("virt-install --name=gatewat-4 --ram 4096 --vcpus=4 -f /home/kvm/gateway-4.qcow2 --cdrom /home/iso/CentOS-6.5-x86_64-bin-DVD1.iso --graphics vnc,listen=0.0.0.0,port=5920, --network bridge=br0 --force --autostart\n")])]),s._v(" "),r("p",[s._v("NAT网络模式")]),s._v(" "),r("pre",[r("code",[s._v("virt-install --name=test --ram 512 --vcpus=1 -f /home/kvm/test.qcow2 --cdrom /opt/CentOS-6.5-x86_64-bin-DVD1.iso --graphics vnc,listen=0.0.0.0,port=5988, --network network=default, --force --autostart\n")])]),s._v(" "),r("p",[r("strong",[s._v("5.启动")])]),s._v(" "),r("p",[s._v("使用"),r("code",[s._v("virsh list --all")]),s._v("查看已安装的kvm")]),s._v(" "),r("p",[s._v("使用"),r("code",[s._v("virsh start test")]),s._v("启动虚拟机")]),s._v(" "),r("p",[s._v("使用VNC工具连接KVM来进行初始化配置")]),s._v(" "),r("h2",{attrs:{id:"配置kvm"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#配置kvm"}},[s._v("#")]),s._v(" 配置KVM")]),s._v(" "),r("p",[s._v("使用"),r("code",[s._v("virsh-install")]),s._v("安装完KVM之后，会自动生成相应配置")]),s._v(" "),r("p",[s._v("KVM的配置文件存储在"),r("code",[s._v("/etc/libvirt/qemu/")])]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /etc/libvirt/qemu/")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost qemu"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\ntotal "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v("\ndrwxr-xr-x. "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Jul "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":30 autostart\ndrwx------. "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Jun "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":21 networks\n-rw-------. "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2566")]),s._v(" Aug "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":28 vm_1.xml\n-rw-------. "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2560")]),s._v(" Jul  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" 02:02 vm_2.xml\n-rw-------. "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2566")]),s._v(" Aug "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":28 vm_3.xml\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br")])]),r("p",[s._v("长的大概是这个样子")]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost qemu"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat vm_1.xml ")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("--\nWARNING: THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE \nOVERWRITTEN AND LOST. Changes to this xml configuration should be made using:\n  "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("virsh")]),s._v(" edit vm_1\nor other application using the libvirt API.\n--"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("domain "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'kvm'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("vm_"),r("span",{pre:!0,attrs:{class:"token operator"}},[r("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v("<")]),s._v("/name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  //此处为hostname\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("uuid"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("2f952159-b231-80a4-8086-d49978513fb"),r("span",{pre:!0,attrs:{class:"token operator"}},[r("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("4")]),s._v("<")]),s._v("/uuid"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  //此处为uuid标识\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("memory "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("unit")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'KiB'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("838860")]),r("span",{pre:!0,attrs:{class:"token operator"}},[r("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("8")]),s._v("<")]),s._v("/memory"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  //此处为内存\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("currentMemory "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("unit")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'KiB'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("838860")]),r("span",{pre:!0,attrs:{class:"token operator"}},[r("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("8")]),s._v("<")]),s._v("/currentMemory"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("vcpu "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("placement")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'static'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[r("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("6")]),s._v("<")]),s._v("/vcpu"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  //此处为cpu核数\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("os"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("type "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("arch")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'x86_64'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("machine")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rhel6.5.0'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("hvm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/type"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("boot "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dev")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hd'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  //此处为启动项目，若想从光盘启动可设置为"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("boot "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dev")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cdrom'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/os"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("features"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("acpi/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("apic/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("pae/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/features"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("clock "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("offset")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utc'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("on_poweroff"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("destroy"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/on_poweroff"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  //此处为关机命令 使用 "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("virsh")]),s._v(" destroy vm_1 关闭\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("on_reboot"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("restart"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/on_reboot"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("on_crash"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("restart"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/on_crash"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("devices"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("emulator"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/usr/libexec/qemu-kvm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/emulator"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("disk "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("device")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'disk'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  //此处为硬盘信息\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("driver "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'qemu'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'raw'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cache")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'none'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("source "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("file")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/home/kvm/vm_1.qcow2'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("target "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dev")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hda'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bus")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ide'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("address "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'drive'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("controller")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bus")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("target")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("unit")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/disk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("disk "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'block'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("device")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cdrom'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  //此处为cdrom信息，可修改为iso的路径\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("driver "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'qemu'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'raw'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("target "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dev")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hdc'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bus")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ide'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("readonly/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("address "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'drive'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("controller")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bus")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("target")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("unit")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/disk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("controller "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'usb'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("index")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  //此处为usb接口信息\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("address "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pci'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("domain")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x0000'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bus")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x00'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("slot")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x01'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x2'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/controller"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("controller "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ide'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("index")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("address "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pci'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("domain")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x0000'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bus")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x00'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("slot")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x01'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x1'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/controller"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("interface "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'network'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  //此处为网卡1信息，使用network也就是nat模式连接virbr0联网\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("mac "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("address")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'52:54:00:9a:d7:82'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("source "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("network")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'default'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("address "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pci'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("domain")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x0000'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bus")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x00'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("slot")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x03'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x0'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/interface"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("interface "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bridge'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  //此处为网卡2信息，使用bridge桥接方式到br1\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("mac "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("address")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'52:54:11:fd:39:23'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("source "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bridge")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'br1'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("address "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pci'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("domain")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x0000'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bus")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x00'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("slot")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x05'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x0'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/interface"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n//若要添加网卡可新加配置，注意修改mac地址\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("interface "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bridge'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("mac "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("address")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'52:54:21:fd:39:23'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("source "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bridge")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'br0'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("address "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pci'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("domain")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x0000'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bus")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x00'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("slot")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x08'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x0'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/interface"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("serial "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pty'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("target "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("port")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/serial"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("console "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pty'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("target "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'serial'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("port")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/console"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("input "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mouse'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bus")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ps2'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("graphics "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vnc'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("port")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'5920'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("autoport")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'no'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("listen")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0.0.0.0'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  //此处为VNC连接端口\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("listen "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'address'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("address")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0.0.0.0'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/graphics"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("video"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("model "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cirrus'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("vram")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'9216'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("heads")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("address "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pci'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("domain")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x0000'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bus")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x00'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("slot")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x02'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x0'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/video"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("memballoon "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("model")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'virtio'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("address "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pci'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("domain")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x0000'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bus")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x00'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("slot")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x04'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x0'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/memballoon"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/devices"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/domain"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost qemu"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br"),r("span",{staticClass:"line-number"},[s._v("27")]),r("br"),r("span",{staticClass:"line-number"},[s._v("28")]),r("br"),r("span",{staticClass:"line-number"},[s._v("29")]),r("br"),r("span",{staticClass:"line-number"},[s._v("30")]),r("br"),r("span",{staticClass:"line-number"},[s._v("31")]),r("br"),r("span",{staticClass:"line-number"},[s._v("32")]),r("br"),r("span",{staticClass:"line-number"},[s._v("33")]),r("br"),r("span",{staticClass:"line-number"},[s._v("34")]),r("br"),r("span",{staticClass:"line-number"},[s._v("35")]),r("br"),r("span",{staticClass:"line-number"},[s._v("36")]),r("br"),r("span",{staticClass:"line-number"},[s._v("37")]),r("br"),r("span",{staticClass:"line-number"},[s._v("38")]),r("br"),r("span",{staticClass:"line-number"},[s._v("39")]),r("br"),r("span",{staticClass:"line-number"},[s._v("40")]),r("br"),r("span",{staticClass:"line-number"},[s._v("41")]),r("br"),r("span",{staticClass:"line-number"},[s._v("42")]),r("br"),r("span",{staticClass:"line-number"},[s._v("43")]),r("br"),r("span",{staticClass:"line-number"},[s._v("44")]),r("br"),r("span",{staticClass:"line-number"},[s._v("45")]),r("br"),r("span",{staticClass:"line-number"},[s._v("46")]),r("br"),r("span",{staticClass:"line-number"},[s._v("47")]),r("br"),r("span",{staticClass:"line-number"},[s._v("48")]),r("br"),r("span",{staticClass:"line-number"},[s._v("49")]),r("br"),r("span",{staticClass:"line-number"},[s._v("50")]),r("br"),r("span",{staticClass:"line-number"},[s._v("51")]),r("br"),r("span",{staticClass:"line-number"},[s._v("52")]),r("br"),r("span",{staticClass:"line-number"},[s._v("53")]),r("br"),r("span",{staticClass:"line-number"},[s._v("54")]),r("br"),r("span",{staticClass:"line-number"},[s._v("55")]),r("br"),r("span",{staticClass:"line-number"},[s._v("56")]),r("br"),r("span",{staticClass:"line-number"},[s._v("57")]),r("br"),r("span",{staticClass:"line-number"},[s._v("58")]),r("br"),r("span",{staticClass:"line-number"},[s._v("59")]),r("br"),r("span",{staticClass:"line-number"},[s._v("60")]),r("br"),r("span",{staticClass:"line-number"},[s._v("61")]),r("br"),r("span",{staticClass:"line-number"},[s._v("62")]),r("br"),r("span",{staticClass:"line-number"},[s._v("63")]),r("br"),r("span",{staticClass:"line-number"},[s._v("64")]),r("br"),r("span",{staticClass:"line-number"},[s._v("65")]),r("br"),r("span",{staticClass:"line-number"},[s._v("66")]),r("br"),r("span",{staticClass:"line-number"},[s._v("67")]),r("br"),r("span",{staticClass:"line-number"},[s._v("68")]),r("br"),r("span",{staticClass:"line-number"},[s._v("69")]),r("br"),r("span",{staticClass:"line-number"},[s._v("70")]),r("br"),r("span",{staticClass:"line-number"},[s._v("71")]),r("br"),r("span",{staticClass:"line-number"},[s._v("72")]),r("br"),r("span",{staticClass:"line-number"},[s._v("73")]),r("br"),r("span",{staticClass:"line-number"},[s._v("74")]),r("br"),r("span",{staticClass:"line-number"},[s._v("75")]),r("br"),r("span",{staticClass:"line-number"},[s._v("76")]),r("br"),r("span",{staticClass:"line-number"},[s._v("77")]),r("br"),r("span",{staticClass:"line-number"},[s._v("78")]),r("br"),r("span",{staticClass:"line-number"},[s._v("79")]),r("br"),r("span",{staticClass:"line-number"},[s._v("80")]),r("br"),r("span",{staticClass:"line-number"},[s._v("81")]),r("br"),r("span",{staticClass:"line-number"},[s._v("82")]),r("br"),r("span",{staticClass:"line-number"},[s._v("83")]),r("br"),r("span",{staticClass:"line-number"},[s._v("84")]),r("br")])]),r("p",[s._v("后期可能会因为需求对KVM重新配置，这个时候我们只需要修改对应的"),r("code",[s._v("xml")]),s._v("文件即可")]),s._v(" "),r("p",[s._v("修改配置的时候需要关闭KVM "),r("code",[s._v("virsh destroy vm_1")])]),s._v(" "),r("p",[s._v("使用"),r("code",[s._v("virsh define vm_1.xml")]),s._v("使配置生效")]),s._v(" "),r("p",[s._v("使用"),r("code",[s._v("virsh start vm_1")]),s._v("启动虚拟机")]),s._v(" "),r("h2",{attrs:{id:"配置网路环境"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#配置网路环境"}},[s._v("#")]),s._v(" 配置网路环境")]),s._v(" "),r("p",[r("strong",[s._v("1.nat模式配置")])]),s._v(" "),r("p",[s._v("KVM默认采用nat模式，用户网络（User Networking）：让虚拟机访问主机、互联网或本地网络上的资源的简单方法，但是不能从网络或其他的客户机访问客户机。在公网IP不够使用KVM还需要上网的时候可以使用，大大节省了公网IP！同时这种模式也使得KVM不用暴露在公网之中，也增加了安全性。")]),s._v(" "),r("p",[s._v("下图是虚拟机管理模块产生的接口关系：")]),s._v(" "),r("p",[r("img",{attrs:{src:t(390),alt:"请输入图片描述"}})]),s._v(" "),r("p",[s._v("其中virbr0是由宿主机虚拟机支持模块安装时产生的虚拟网络接口，也是一个switch和bridge，负责把内容分发到各虚拟机。")]),s._v(" "),r("p",[s._v("从图上可以看出，虚拟接口和物理接口之间没有连接关系，所以虚拟机只能在通过虚拟的网络访问外部世界，无法从网络上定位和访问虚拟主机。")]),s._v(" "),r("p",[s._v("下面是nat的default配置，可以自定义地址池")]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost qemu"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/libvirt/qemu/networks/default.xml ")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("network"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("default"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("uuid"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("a8e0859c-4761-4d78-bcd6-eaeeceace42"),r("span",{pre:!0,attrs:{class:"token operator"}},[r("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v("<")]),s._v("/uuid"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("bridge "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"virbr0"')]),s._v(" /"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("mac "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("address")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'52:54:00:C9:D5:1E'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("forward/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ip "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("address")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.122.1"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("netmask")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"255.255.255.0"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dhcp"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("range "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("start")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.122.2"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("end")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.122.254"')]),s._v(" /"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/dhcp"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/ip"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/network"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost qemu"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br")])]),r("p",[s._v("创建方法：")]),s._v(" "),r("p",[s._v("使用"),r("code",[s._v("virsh net-start default")]),s._v("来启动nat网络，同时，虚拟机支持模块会修改iptables规则，通过命令可以查看：")]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# iptables -t nat -L -nv")]),s._v("\nChain PREROUTING "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("policy ACCEPT "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16924")]),s._v(" packets, 2759K bytes"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\npkts bytes target     prot opt "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("     out     "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v("               destination\nChain POSTROUTING "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("policy ACCEPT "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2009")]),s._v(" packets, 125K bytes"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\npkts bytes target     prot opt "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("     out     "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v("               destination        \n "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("421")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("31847")]),s._v(" MASQUERADE  all  --  *      *       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".122.0/24    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".122.0/24   -----------"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("这条是关键，它配置了NAT功能。\nChain OUTPUT "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("policy ACCEPT "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2011")]),s._v(" packets, 125K bytes"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\npkts bytes target     prot opt "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("     out     "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v("               destination        \n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br")])]),r("p",[s._v("如果你由于不小心将IPTABLE清空或者STOP导致IPTABLE配置丢失，可以通过如下操作来恢复：")]),s._v(" "),r("pre",[r("code",[s._v("virsh net-destroy default\n\nvirsh net-start default\n")])]),s._v(" "),r("p",[s._v("确认路由转发开启")]),s._v(" "),r("pre",[r("code",[s._v("[root@localhost qemu]# more /proc/sys/net/ipv4/ip_forward \n1\n")])]),s._v(" "),r("p",[s._v("下面是一个KVM的nat模式的范例")]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@vm_1 data"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/sysconfig/network-scripts/ifcfg-eth0")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#使用dhcp")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#DEVICE=eth0")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ONBOOT=yes")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#TYPE=Ethernet")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#BOOTPROTO=dhcp")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#手动IP")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DEVICE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("eth0\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ONBOOT")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPADDR")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".122.3\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NETMASK")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.0\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GATEWAY")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".122.1\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DNS1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".122.1\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TYPE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Ethernet\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BOOTPROTO")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("static\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPV6INIT")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("USERCTL")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@vm_web_1_1 data"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br")])]),r("p",[r("strong",[s._v("2.Bridge方式")])]),s._v(" "),r("p",[s._v("虚拟网桥（Virtual Bridge）：设置好后客户机与互联网，客户机与主机之间都可以通信，试用于需要多个公网IP的环境。")]),s._v(" "),r("p",[s._v("Bridge方式即虚拟网桥的网络连接方式，是客户机和子网里面的机器能够互相通信。可以使虚拟机成为网络中具有独立IP的主机。")]),s._v(" "),r("p",[s._v("桥接网络（也叫物理设备共享）被用作把一个物理设备复制到一台虚拟机。网桥多用作高级设置，特别是主机多个网络接口的情况。")]),s._v(" "),r("p",[r("img",{attrs:{src:t(391),alt:"请输入图片描述"}})]),s._v(" "),r("p",[s._v("如上图，网桥的基本原理就是创建一个桥接接口br0，在物理网卡和虚拟网络接口之间传递数据。")]),s._v(" "),r("p",[s._v("创建方法：")]),s._v(" "),r("p",[s._v("不用过多命令，只需要修改好网卡的桥接方式，配好IP即可，下面是范例，不用注释仔细读一遍就能看懂了！")]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("kvm_server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost network-scripts"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat ifcfg-br0 ")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DEVICE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("br0\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BOOTPROTO")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("none\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TYPE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Bridge\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPADDR")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("114.137")]),s._v(".122.233\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NETMASK")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.128\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GATEWAY")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("114.137")]),s._v(".102.139\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DNS1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.96")]),s._v(".122.83\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPV6INIT")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NM_CONTROLLED")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ONBOOT")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("USERCTL")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no\n\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost network-scripts"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat ifcfg-br1")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DEVICE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("br1\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BOOTPROTO")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("none\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TYPE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Bridge\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPADDR")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.12\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NETMASK")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.0\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPV6INIT")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ONBOOT")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("USERCTL")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no\n\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost network-scripts"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat ifcfg-em1 ")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DEVICE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("em1\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ONBOOT")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BOOTPROTO")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("none\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BRIDGE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("br0\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TYPE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Ethernet\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPV6INIT")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("USERCTL")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no\n\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost network-scripts"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat ifcfg-em2")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DEVICE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("em2\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ONBOOT")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BOOTPROTO")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("none\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BRIDGE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("br1\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TYPE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Ethernet\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPV6INIT")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("USERCTL")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no\n\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("kvm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@gateway-2 network-scripts"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat ifcfg-eth0")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DEVICE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("eth0\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TYPE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Ethernet\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ONBOOT")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NM_CONTROLLED")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPADDR")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("114.137")]),s._v(".122.222\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NETMASK")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.128\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GATEWAY")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("114.137")]),s._v(".102.139\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DNS1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.96")]),s._v(".122.83\n\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@gateway-2 network-scripts"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat ifcfg-eth0:1")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DEVICE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("eth0:1\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TYPE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Ethernet\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ONBOOT")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPADDR")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("114.137")]),s._v(".122.123\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NETMASK")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.128\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NM_CONTROLLED")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BOOTPROTO")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("static\n\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@gateway-2 network-scripts"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat ifcfg-eth1")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DEVICE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("eth1\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ONBOOT")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPADDR")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.25\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NETMASK")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.0\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TYPE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Ethernet\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BOOTPROTO")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("static\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPV6INIT")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no\n"),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("USERCTL")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br"),r("span",{staticClass:"line-number"},[s._v("27")]),r("br"),r("span",{staticClass:"line-number"},[s._v("28")]),r("br"),r("span",{staticClass:"line-number"},[s._v("29")]),r("br"),r("span",{staticClass:"line-number"},[s._v("30")]),r("br"),r("span",{staticClass:"line-number"},[s._v("31")]),r("br"),r("span",{staticClass:"line-number"},[s._v("32")]),r("br"),r("span",{staticClass:"line-number"},[s._v("33")]),r("br"),r("span",{staticClass:"line-number"},[s._v("34")]),r("br"),r("span",{staticClass:"line-number"},[s._v("35")]),r("br"),r("span",{staticClass:"line-number"},[s._v("36")]),r("br"),r("span",{staticClass:"line-number"},[s._v("37")]),r("br"),r("span",{staticClass:"line-number"},[s._v("38")]),r("br"),r("span",{staticClass:"line-number"},[s._v("39")]),r("br"),r("span",{staticClass:"line-number"},[s._v("40")]),r("br"),r("span",{staticClass:"line-number"},[s._v("41")]),r("br"),r("span",{staticClass:"line-number"},[s._v("42")]),r("br"),r("span",{staticClass:"line-number"},[s._v("43")]),r("br"),r("span",{staticClass:"line-number"},[s._v("44")]),r("br"),r("span",{staticClass:"line-number"},[s._v("45")]),r("br"),r("span",{staticClass:"line-number"},[s._v("46")]),r("br"),r("span",{staticClass:"line-number"},[s._v("47")]),r("br"),r("span",{staticClass:"line-number"},[s._v("48")]),r("br"),r("span",{staticClass:"line-number"},[s._v("49")]),r("br"),r("span",{staticClass:"line-number"},[s._v("50")]),r("br"),r("span",{staticClass:"line-number"},[s._v("51")]),r("br"),r("span",{staticClass:"line-number"},[s._v("52")]),r("br"),r("span",{staticClass:"line-number"},[s._v("53")]),r("br"),r("span",{staticClass:"line-number"},[s._v("54")]),r("br"),r("span",{staticClass:"line-number"},[s._v("55")]),r("br"),r("span",{staticClass:"line-number"},[s._v("56")]),r("br"),r("span",{staticClass:"line-number"},[s._v("57")]),r("br"),r("span",{staticClass:"line-number"},[s._v("58")]),r("br"),r("span",{staticClass:"line-number"},[s._v("59")]),r("br"),r("span",{staticClass:"line-number"},[s._v("60")]),r("br"),r("span",{staticClass:"line-number"},[s._v("61")]),r("br"),r("span",{staticClass:"line-number"},[s._v("62")]),r("br"),r("span",{staticClass:"line-number"},[s._v("63")]),r("br"),r("span",{staticClass:"line-number"},[s._v("64")]),r("br"),r("span",{staticClass:"line-number"},[s._v("65")]),r("br"),r("span",{staticClass:"line-number"},[s._v("66")]),r("br"),r("span",{staticClass:"line-number"},[s._v("67")]),r("br"),r("span",{staticClass:"line-number"},[s._v("68")]),r("br"),r("span",{staticClass:"line-number"},[s._v("69")]),r("br"),r("span",{staticClass:"line-number"},[s._v("70")]),r("br"),r("span",{staticClass:"line-number"},[s._v("71")]),r("br"),r("span",{staticClass:"line-number"},[s._v("72")]),r("br"),r("span",{staticClass:"line-number"},[s._v("73")]),r("br")])]),r("p",[r("strong",[s._v("注意：网络配置可以同时存在nat和Bridge，看最上面的vm_1.xml")])]),s._v(" "),r("h2",{attrs:{id:"_2014-10-29更新"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2014-10-29更新"}},[s._v("#")]),s._v(" ---2014.10.29更新---")]),s._v(" "),r("p",[s._v("由于按照上文的NAT方式配置的机器，过了几个月宿主机重启之后死活连接不上外网ping不通"),r("code",[s._v("virbr0")]),s._v("(192.168.122.1)，"),r("code",[s._v("virsh net-destroy default")]),s._v("和 "),r("code",[s._v("virsh net-start default")]),s._v("之后也是不行，尝试了各种方案，最后"),r("code",[s._v("/etc/init.d/libvirtd restart")]),s._v("之后会偶尔联上外网ping通192.168.122.1，但是"),r("code",[s._v("virsh net-destroy default")]),s._v("和 "),r("code",[s._v("virsh net-start default")]),s._v("之后又连不上外网，今天又在测试环境测试都是OK的也没发现问题~~~~")]),s._v(" "),r("p",[s._v("真实匪夷所思~~~")]),s._v(" "),r("p",[s._v("最后抱着尝试一下的心态按照http://www.linuxidc.com/Linux/2012-05/61445.htm这篇文章配置了，果断就OK了！再此记录一下！")]),s._v(" "),r("p",[r("strong",[s._v("宿主机配置")])]),s._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@web8 qemu"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cp /etc/libvirt/qemu/networks/default.xml /etc/libvirt/qemu/networks/default.xml.bk ")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@web8 qemu"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/libvirt/qemu/networks/default.xml")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("network"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("default"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("uuid"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("ea07af3d-fd95-444d-a1d2-a0ae5fce43de"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/uuid"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("forward "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nat'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   //此处增加mode参数为nat\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("bridge "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'virbr0'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stp")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'on'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("delay")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v(" /"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("mac "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("address")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'52:54:00:89:DD:12'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ip "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("address")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'192.168.122.1'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("netmask")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'255.255.255.0'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dhcp"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("range "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("start")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'192.168.122.2'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("end")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'192.168.122.254'")]),s._v(" /"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/dhcp"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/ip"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/network"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@web8 qemu"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# virsh net-define /etc/libvirt/qemu/networks/default.xml")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@web8 qemu"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# virsh net-destroy default")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@web8 qemu"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# virsh net-start default")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@web8 qemu"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat  vm.xml")]),s._v("\n\n······\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("interface "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'network'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("mac "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("address")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'52:54:00:66:6e:49'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("source "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("network")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'default'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("model "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'virtio'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  //此处为新增参数mode\n      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("address "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pci'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("domain")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x0000'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bus")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x00'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("slot")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x03'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0x0'")]),s._v("/"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/interface"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n······\n\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br"),r("span",{staticClass:"line-number"},[s._v("27")]),r("br"),r("span",{staticClass:"line-number"},[s._v("28")]),r("br"),r("span",{staticClass:"line-number"},[s._v("29")]),r("br"),r("span",{staticClass:"line-number"},[s._v("30")]),r("br"),r("span",{staticClass:"line-number"},[s._v("31")]),r("br"),r("span",{staticClass:"line-number"},[s._v("32")]),r("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);